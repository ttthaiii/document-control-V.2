(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[532],{85604:function(e,t,s){Promise.resolve().then(s.bind(s,26078))},41671:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});const r=(0,s(79205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},99388:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});const r=(0,s(79205).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},76865:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});const r=(0,s(79205).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},99376:function(e,t,s){"use strict";var r=s(35475);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},26078:function(e,t,s){"use strict";s.d(t,{AcceptInvitationForm:function(){return c}});var r=s(57437),a=s(2265),n=s(99376),i=s(29501),o=s(54001);function c(e){let{token:t}=e;const s=(0,n.useRouter)(),[c,l]=(0,a.useState)(!1),[d,u]=(0,a.useState)(null),[m,x]=(0,a.useState)(""),{register:h,handleSubmit:p,watch:b,formState:{errors:g}}=(0,i.cI)(),f=b("password"),{showNotification:w}=(0,o.l)();(0,a.useEffect)((()=>{t&&(async()=>{try{const e=await fetch("/api/invitation/accept?token=".concat(t)),s=await e.json();s.success?u(s.invitation):x(s.error||"Invalid invitation")}catch(e){x("Failed to load invitation")}})()}),[t]);return d||m?m?(0,r.jsx)("div",{className:"max-w-md mx-auto mt-8 p-6 bg-white rounded-lg shadow-lg",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"\u274c \u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14"}),(0,r.jsx)("p",{className:"text-red-700 mb-4",children:m}),(0,r.jsx)("button",{onClick:()=>s.push("/login"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"\u0e01\u0e25\u0e31\u0e1a\u0e2a\u0e39\u0e48\u0e2b\u0e19\u0e49\u0e32\u0e40\u0e02\u0e49\u0e32\u0e2a\u0e39\u0e48\u0e23\u0e30\u0e1a\u0e1a"})]})}):(0,r.jsxs)("div",{className:"max-w-md mx-auto mt-8 p-6 bg-white rounded-lg shadow-lg",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-2",children:"\ud83c\udf89 \u0e22\u0e34\u0e19\u0e14\u0e35\u0e15\u0e49\u0e2d\u0e19\u0e23\u0e31\u0e1a!"}),(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,r.jsxs)("p",{className:"text-blue-800 text-sm",children:[(0,r.jsx)("strong",{children:"\u0e2d\u0e35\u0e40\u0e21\u0e25:"})," ",d.email,(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"\u0e15\u0e33\u0e41\u0e2b\u0e19\u0e48\u0e07\u0e07\u0e32\u0e19:"})," ",d.role,(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"\u0e2a\u0e16\u0e32\u0e19\u0e30:"})," ",d.status]})}),(0,r.jsxs)("form",{onSubmit:p((async e=>{l(!0),x("");try{const r=await fetch("/api/invitation/accept",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,password:e.password})}),a=await r.json();a.success?(w("success","\u0e2a\u0e23\u0e49\u0e32\u0e07\u0e1a\u0e31\u0e0d\u0e0a\u0e35\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08!","\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e02\u0e49\u0e32\u0e2a\u0e39\u0e48\u0e23\u0e30\u0e1a\u0e1a\u0e14\u0e49\u0e27\u0e22\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e41\u0e25\u0e30\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19\u0e17\u0e35\u0e48\u0e04\u0e38\u0e13\u0e15\u0e31\u0e49\u0e07\u0e44\u0e27\u0e49"),s.push("/login")):x(a.error||"Failed to create account")}catch(r){x("Network error occurred")}finally{l(!1)}})),className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19"}),(0,r.jsx)("input",{type:"password",...h("password",{required:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e43\u0e2a\u0e48\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19",minLength:{value:6,message:"\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19\u0e15\u0e49\u0e2d\u0e07\u0e21\u0e35\u0e2d\u0e22\u0e48\u0e32\u0e07\u0e19\u0e49\u0e2d\u0e22 6 \u0e15\u0e31\u0e27\u0e2d\u0e31\u0e01\u0e29\u0e23"}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900",placeholder:"\u0e43\u0e2a\u0e48\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13"}),g.password&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:g.password.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19"}),(0,r.jsx)("input",{type:"password",...h("confirmPassword",{required:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19",validate:e=>e===f||"\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19\u0e44\u0e21\u0e48\u0e15\u0e23\u0e07\u0e01\u0e31\u0e19"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900",placeholder:"\u0e43\u0e2a\u0e48\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19\u0e2d\u0e35\u0e01\u0e04\u0e23\u0e31\u0e49\u0e07"}),g.confirmPassword&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:g.confirmPassword.message})]}),(0,r.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed transition-colors",children:c?"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e2a\u0e23\u0e49\u0e32\u0e07\u0e1a\u0e31\u0e0d\u0e0a\u0e35...":"\u0e2a\u0e23\u0e49\u0e32\u0e07\u0e1a\u0e31\u0e0d\u0e0a\u0e35\u0e41\u0e25\u0e30\u0e40\u0e02\u0e49\u0e32\u0e2a\u0e39\u0e48\u0e23\u0e30\u0e1a\u0e1a"})]}),m&&(0,r.jsx)("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-md p-3",children:(0,r.jsx)("p",{className:"text-red-700 text-sm",children:m})})]}):(0,r.jsx)("div",{className:"max-w-md mx-auto mt-8 p-6 bg-white rounded-lg shadow-lg",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e15\u0e23\u0e27\u0e08\u0e2a\u0e2d\u0e1a\u0e04\u0e33\u0e40\u0e0a\u0e34\u0e0d..."})]})})}},54001:function(e,t,s){"use strict";s.d(t,{NotificationProvider:function(){return m},l:function(){return x}});var r=s(57437),a=s(2265),n=s(41671),i=s(99388),o=s(76865);const c={success:(0,r.jsx)(n.Z,{className:"h-12 w-12 text-green-500"}),error:(0,r.jsx)(i.Z,{className:"h-12 w-12 text-red-500"}),warning:(0,r.jsx)(o.Z,{className:"h-12 w-12 text-yellow-500"})},l={success:"bg-green-600 hover:bg-green-700",error:"bg-red-600 hover:bg-red-700",warning:"bg-yellow-600 hover:bg-yellow-700"};var d=e=>{let{isOpen:t,type:s,title:a,message:n,onClose:i}=e;return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-[100] flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-sm mx-auto p-6 text-center",children:[(0,r.jsx)("div",{className:"flex justify-center mb-4",children:c[s]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:a}),n&&(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-6 whitespace-pre-wrap",children:n}),(0,r.jsx)("button",{onClick:i,className:"w-full px-4 py-2 text-white font-semibold rounded-lg transition-colors ".concat(l[s]),children:"\u0e15\u0e01\u0e25\u0e07"})]})}):null};const u=(0,a.createContext)(void 0),m=e=>{let{children:t}=e;const[s,n]=(0,a.useState)({isOpen:!1,type:"success",title:"",message:null}),i=(0,a.useCallback)((function(e,t){n({isOpen:!0,type:e,title:t,message:arguments.length>2&&void 0!==arguments[2]?arguments[2]:""})}),[]);return(0,r.jsxs)(u.Provider,{value:{showNotification:i},children:[t,(0,r.jsx)(d,{isOpen:s.isOpen,type:s.type,title:s.title,message:s.message,onClose:()=>{n((e=>({...e,isOpen:!1})))}})]})},x=()=>{const e=(0,a.useContext)(u);if(void 0===e)throw new Error("useNotification must be used within a NotificationProvider");return e}}},function(e){e.O(0,[583,971,997,744],(function(){return t=85604,e(e.s=t);var t}));var t=e.O();_N_E=t}]);