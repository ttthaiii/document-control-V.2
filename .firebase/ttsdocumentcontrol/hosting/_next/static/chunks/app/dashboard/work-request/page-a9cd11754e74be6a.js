(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[223],{15750:function(e,t,s){Promise.resolve().then(s.bind(s,37346))},92735:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});const a=(0,s(79205).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},42208:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});const a=(0,s(79205).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},37346:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return G}});var a=s(57437),r=s(2265),n=s(99376),l=s(47649),i=s(20731),o=s(99761),c=s(48736),d=s(31810),m=s(37157),x=s(453);const u=e=>{if(!e)return"N/A";if("function"===typeof e.toDate){return e.toDate().toLocaleDateString("th-TH",{day:"2-digit",month:"short",year:"numeric"})}const t=new Date(e);return isNaN(t.getTime())?"Invalid Date":t.toLocaleDateString("th-TH",{day:"2-digit",month:"short",year:"numeric"})},h=e=>{const t=x.NK[e]||e;let s="text-gray-800",a="bg-gray-100";switch(e){case x.Ge.DRAFT:a="bg-gray-200",s="text-gray-700";break;case x.Ge.REJECTED_BY_PM:a="bg-red-100",s="text-red-800";break;case x.Ge.PENDING_BIM:a="bg-blue-100",s="text-blue-800";break;case x.Ge.IN_PROGRESS:a="bg-yellow-100",s="text-yellow-800";break;case x.Ge.PENDING_ACCEPTANCE:a="bg-purple-100",s="text-purple-800";break;case x.Ge.REVISION_REQUESTED:a="bg-orange-100",s="text-orange-800";break;case x.Ge.COMPLETED:a="bg-green-100",s="text-green-800";break;default:a="bg-gray-100",s="text-gray-800"}return{text:t,colorClasses:"".concat(a," ").concat(s)}};function p(e){let{documents:t,isLoading:s,onDocumentClick:n,selectedIds:i,onSelectionChange:p,onApproveRejectClick:g}=e;const{user:f}=(0,l.a)(),b=f&&x.$p.includes(f.role),N=(0,r.useMemo)((()=>{if(!f)return[];const e=f.role;return e===x.K$.ADMIN||x.$p.includes(e)?t:e===x.K$.BIM?t.filter((e=>e.status!==x.Ge.DRAFT&&e.status!==x.Ge.REJECTED_BY_PM)):x.c9.includes(e)&&f.sites&&f.sites.length>0?t.filter((e=>e.createdBy===f.id||e.status!==x.Ge.DRAFT&&e.status!==x.Ge.REJECTED_BY_PM)):t.filter((e=>e.status!==x.Ge.DRAFT&&e.status!==x.Ge.REJECTED_BY_PM))}),[t,f]),y=(0,r.useMemo)((()=>N.filter((e=>e.status===x.Ge.DRAFT))),[N]),j=y.length>0&&y.every((e=>i.includes(e.id)));return s?(0,a.jsx)("div",{className:"w-full h-96 flex justify-center items-center bg-white rounded-lg shadow",children:(0,a.jsx)(o.Z,{})}):t&&0!==t.length?(0,a.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden h-full flex flex-col",children:(0,a.jsx)("div",{className:"overflow-auto flex-1 relative",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50 sticky top-0 z-10",children:(0,a.jsxs)("tr",{children:[b&&(0,a.jsx)("th",{className:"px-4 py-3 text-left w-[50px]",children:(0,a.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:j,onChange:e=>(e=>{const t=N.filter((e=>e.status===x.Ge.DRAFT)).map((e=>e.id));if(e){const e=Array.from(new Set([...i,...t]));p(e)}else p(i.filter((e=>!t.includes(e))))})(e.target.checked),disabled:0===y.length})}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"\u0e40\u0e25\u0e02\u0e17\u0e35\u0e48\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"\u0e2b\u0e31\u0e27\u0e02\u0e49\u0e2d\u0e40\u0e23\u0e37\u0e48\u0e2d\u0e07"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"\u0e42\u0e04\u0e23\u0e07\u0e01\u0e32\u0e23"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"\u0e2a\u0e16\u0e32\u0e19\u0e30"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"\u0e2d\u0e31\u0e1b\u0e40\u0e14\u0e15\u0e25\u0e48\u0e32\u0e2a\u0e38\u0e14"}),b&&(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map((e=>{var t;const s=h(e.status),r=e.status===x.Ge.DRAFT,l=i.includes(e.id);return(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors ".concat(r?"bg-yellow-50/50 hover:bg-yellow-100/50":""),onClick:t=>{const s=t.target;"INPUT"===s.tagName||s.closest("button")||n(e)},children:[b&&(0,a.jsx)("td",{className:"px-4 py-4",children:r?(0,a.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:l,onChange:t=>{return s=e.id,a=t.target.checked,void p(a?[...i,s]:i.filter((e=>e!==s)));var s,a},onClick:e=>e.stopPropagation()}):null}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("p",{className:"text-sm font-semibold text-blue-600",children:e.documentNumber})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("p",{className:"text-sm text-gray-800 line-clamp-2 font-medium",children:e.taskName})}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("p",{className:"text-sm text-gray-600",children:(null===(t=e.site)||void 0===t?void 0:t.name)||"N/A"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("span",{className:"inline-flex items-center justify-center px-2.5 py-1 rounded-full text-xs font-bold shadow-sm ".concat(s.colorClasses),children:s.text})}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("span",{className:"text-sm text-gray-600",children:u(e.updatedAt)})}),b&&(0,a.jsx)("td",{className:"px-4 py-4 text-center whitespace-nowrap",children:r&&g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),g("APPROVE_DRAFT",e.id)},className:"text-green-600 hover:text-green-800 p-1.5 rounded-md hover:bg-green-100 mx-1 disabled:opacity-50 transition-colors",title:"\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34",children:(0,a.jsx)(d.Z,{size:18})}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),g("REJECT_DRAFT",e.id)},className:"text-red-600 hover:text-red-800 p-1.5 rounded-md hover:bg-red-100 mx-1 disabled:opacity-50 transition-colors",title:"\u0e44\u0e21\u0e48\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34",children:(0,a.jsx)(m.Z,{size:18})})]})})]},e.id)}))})]})})}):(0,a.jsxs)("div",{className:"w-full h-96 flex flex-col justify-center items-center bg-white rounded-lg shadow text-center border-2 border-dashed",children:[(0,a.jsx)(c.Z,{className:"w-16 h-16 text-gray-300 mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-700",children:"\u0e44\u0e21\u0e48\u0e1e\u0e1a Work Request"}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"\u0e22\u0e31\u0e07\u0e44\u0e21\u0e48\u0e21\u0e35\u0e01\u0e32\u0e23\u0e2a\u0e23\u0e49\u0e32\u0e07\u0e04\u0e33\u0e23\u0e49\u0e2d\u0e07\u0e02\u0e2d\u0e07\u0e32\u0e19\u0e43\u0e19\u0e42\u0e04\u0e23\u0e07\u0e01\u0e32\u0e23\u0e19\u0e35\u0e49"})]})}var g=s(65621),f=s(32489),b=s(30401),N=s(79205);const y=(0,N.Z)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var j=s(76865),v=s(18930),w=s(76980),E=s(42208),k=s(92735),R=s(17689);const A=(0,N.Z)("corner-up-left",[["path",{d:"M20 20v-7a4 4 0 0 0-4-4H4",key:"1nkjon"}],["path",{d:"M9 14 4 9l5-5",key:"102s5s"}]]);var T=s(44743),S=s(54001),C=s(57576);const I=e=>{if(!e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(1))+" "+["B","KB","MB","GB"][t]},D=function(e){let t,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return"N/A";if(t=e&&"object"===typeof e&&"_seconds"in e?new Date(1e3*e._seconds):new Date(e),isNaN(t.getTime()))return"Invalid Date";const a={day:"2-digit",month:"short",year:"numeric"};return s&&(a.hour="2-digit",a.minute="2-digit"),t.toLocaleString("th-TH",a)},_=e=>({text:x.NK[e]||e,color:x.yh[e]||"#6c757d"}),M=e=>{let{workflow:t,onClose:s}=e;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-[60] flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[80vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-gray-800 flex items-center",children:[(0,a.jsx)(g.Z,{size:20,className:"mr-2"}),"\u0e1b\u0e23\u0e30\u0e27\u0e31\u0e15\u0e34 Work Request"]}),(0,a.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(f.Z,{size:24})})]}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto",children:(0,a.jsx)("div",{className:"border-l-2 border-gray-200 ml-2",children:t.length>0?t.map(((e,t)=>(0,a.jsxs)("div",{className:"relative pl-6 pb-8 last:pb-0",children:[(0,a.jsx)("div",{className:"absolute -left-[9px] top-1 w-4 h-4 bg-blue-500 rounded-full border-2 border-white"}),(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:_(e.status).text}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["\u0e42\u0e14\u0e22: ",e.userName," (",e.role,")"]}),(0,a.jsx)("time",{className:"text-xs text-gray-400",children:D(e.timestamp)}),e.comments&&(0,a.jsx)("div",{className:"mt-2 p-2 bg-gray-50 rounded-md text-xs italic",children:(0,a.jsxs)("p",{className:"text-gray-600",children:['"',e.comments,'"']})})]},t))):(0,a.jsx)("p",{className:"text-sm text-gray-500 pl-6",children:"\u0e44\u0e21\u0e48\u0e21\u0e35\u0e1b\u0e23\u0e30\u0e27\u0e31\u0e15\u0e34"})})})]})})};function P(e){let{documentId:t,onClose:s,onUpdate:n}=e;var i;const{user:u,firebaseUser:h}=(0,l.a)(),{showNotification:p}=(0,S.l)(),[N,P]=(0,r.useState)(null),[K,F]=(0,r.useState)(!0),[O,$]=(0,r.useState)(!1),[z,Z]=(0,r.useState)(""),[W,V]=(0,r.useState)([]),[B,G]=(0,r.useState)(!1),[U,J]=(0,r.useState)(""),[q,L]=(0,r.useState)([]),[Q,H]=(0,r.useState)(!1),[Y,X]=(0,r.useState)(!1),[ee,te]=(0,r.useState)(null),[se,ae]=(0,r.useState)(null),[re,ne]=(0,r.useState)(""),[le,ie]=(0,r.useState)(null),[oe,ce]=(0,r.useState)(null),[de,me]=(0,r.useState)(""),xe=(null===u||void 0===u?void 0:u.role)===x.K$.BIM&&(null===N||void 0===N?void 0:N.status)===x.Ge.IN_PROGRESS,ue=u&&x.oU.includes(u.role)&&(null===N||void 0===N?void 0:N.status)===x.Ge.PENDING_ACCEPTANCE,he=(null===u||void 0===u?void 0:u.role)===x.K$.BIM&&(null===N||void 0===N?void 0:N.status)===x.Ge.REVISION_REQUESTED,pe=u&&x.$p.includes(u.role)&&(null===N||void 0===N?void 0:N.status)===x.Ge.DRAFT,ge=(0,r.useMemo)((()=>((null===N||void 0===N?void 0:N.revisionNumber)||0)+1),[N]),fe=(0,r.useMemo)((()=>N?"".concat(N.documentNumber.split("-REV")[0],"-REV").concat(String(ge).padStart(2,"0")):""),[N,ge]),be=(0,r.useMemo)((()=>{if(!N||!N.workflow)return[];const e=N.workflow.find((e=>e.status===N.status));return(null===e||void 0===e?void 0:e.files)||[]}),[N]);(0,r.useEffect)((()=>{(async()=>{if(t&&h){F(!0);try{const e=await h.getIdToken(),s=await fetch("/api/work-request/".concat(t),{headers:{Authorization:"Bearer ".concat(e)}}),a=await s.json();if(!a.success)throw new Error(a.error);P(a.document)}catch(e){p("error","\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14","\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e42\u0e2b\u0e25\u0e14\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23\u0e44\u0e14\u0e49"),s()}finally{F(!1)}}})()}),[t,h,p,s]),(0,r.useEffect)((()=>{if(he&&h&&N){const e=async()=>{var e,t;if((null===(e=N.site)||void 0===e?void 0:e.name)&&N.documentNumber&&(null===(t=N.taskData)||void 0===t?void 0:t.taskName)){H(!0),X(!1),te(null),ae(null);try{const e=await h.getIdToken(),t=await fetch("/api/bim-tracking/verify-task",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({documentNumber:N.documentNumber.split("-REV")[0],projectName:N.site.name,rev:ge,taskName:N.taskData.taskName})}),s=await t.json();if(!t.ok||!s.success)throw new Error(s.error||"\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e15\u0e23\u0e27\u0e08\u0e2a\u0e2d\u0e1a Task \u0e44\u0e14\u0e49");s.exists?(X(!0),ae(s.taskId)):te("\u0e01\u0e23\u0e38\u0e13\u0e32\u0e2a\u0e23\u0e49\u0e32\u0e07 Task \u0e2a\u0e33\u0e2b\u0e23\u0e31\u0e1a Revision \u0e19\u0e35\u0e49\u0e43\u0e19\u0e23\u0e30\u0e1a\u0e1a BIM Tracking \u0e01\u0e48\u0e2d\u0e19")}catch(s){te(s.message)}finally{H(!1)}}else te("\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23\u0e44\u0e21\u0e48\u0e2a\u0e21\u0e1a\u0e39\u0e23\u0e13\u0e4c \u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e15\u0e23\u0e27\u0e08\u0e2a\u0e2d\u0e1a Task \u0e44\u0e14\u0e49")};e()}}),[he,N,h,ge]);const Ne=async e=>{try{if(!h)throw new Error("\u0e01\u0e23\u0e38\u0e13\u0e32\u0e25\u0e47\u0e2d\u0e01\u0e2d\u0e34\u0e19\u0e01\u0e48\u0e2d\u0e19\u0e2d\u0e31\u0e1b\u0e42\u0e2b\u0e25\u0e14\u0e44\u0e1f\u0e25\u0e4c");const t=await h.getIdToken(),s=new FormData;s.append("file",e);const a=await fetch("/api/rfa/upload-temp-file",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:s}),r=await a.json();if(r.success)return{status:"success",uploadedData:r.fileData};throw new Error(r.error||"\u0e2d\u0e31\u0e1b\u0e42\u0e2b\u0e25\u0e14\u0e25\u0e49\u0e21\u0e40\u0e2b\u0e25\u0e27")}catch(t){return{status:"error",error:t instanceof Error?t.message:"\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14"}}},ye=async(e,t)=>{const s=Array.from(e.target.files||[]);s.length&&(we(s,t),e.target.value="")},je=(e,t)=>{("revision"===t?L:V)((t=>t.map((t=>{if(t.id===e){const e=t.uploadedData?{...t.uploadedData,fileName:de}:void 0;return{...t,customName:de,uploadedData:e}}return t})))),ce(null)},ve=()=>{ce(null),me("")},we=async(e,t)=>{const s=e.map((e=>({id:"".concat(e.name,"-").concat(Date.now()),file:e,status:"pending"}))),a="revision"===t?L:V;a((e=>[...e,...s]));for(const r of s){a((e=>e.map((e=>e.id===r.id?{...e,status:"uploading"}:e))));const e=await Ne(r.file);a((t=>t.map((t=>t.id===r.id?{...t,...e}:t))))}},Ee=async e=>{if(N&&h){$(!0);try{const t=await h.getIdToken(),a=W.filter((e=>"success"===e.status)),r=await fetch("/api/work-request/".concat(N.id,"/update"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({action:e,payload:{comments:z,files:a.map((e=>e.uploadedData))}})}),l=await r.json();if(!l.success)throw new Error(l.error);p("success","\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08","\u0e2a\u0e16\u0e32\u0e19\u0e30\u0e16\u0e39\u0e01\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e40\u0e1b\u0e47\u0e19: ".concat(_(l.newStatus).text)),n(),s()}catch(t){p("error","\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14",t instanceof Error?t.message:"Failed to perform action")}finally{$(!1)}}},ke=async e=>{if(N&&h)if("REJECT_DRAFT"!==e||re.trim()){$(!0);try{const t=await h.getIdToken(),a=await fetch("/api/work-request/".concat(N.id,"/update"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({action:e,payload:{comments:re}})}),r=await a.json();if(!r.success)throw new Error(r.error||"\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14\u0e43\u0e19\u0e01\u0e32\u0e23\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23");p("success","\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08","\u0e2a\u0e16\u0e32\u0e19\u0e30\u0e16\u0e39\u0e01\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e40\u0e1b\u0e47\u0e19: ".concat(_(r.newStatus).text)),n(),s()}catch(t){p("error","\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14",t instanceof Error?t.message:"Unknown error")}finally{$(!1)}}else p("warning","\u0e01\u0e23\u0e38\u0e13\u0e32\u0e01\u0e23\u0e2d\u0e01\u0e40\u0e2b\u0e15\u0e38\u0e1c\u0e25","\u0e15\u0e49\u0e2d\u0e07\u0e23\u0e30\u0e1a\u0e38\u0e40\u0e2b\u0e15\u0e38\u0e1c\u0e25\u0e43\u0e19\u0e01\u0e32\u0e23\u0e44\u0e21\u0e48\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34")};if(K)return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:(0,a.jsx)(o.Z,{className:"w-12 h-12 text-white"})});if(!N)return null;const Re=_(N.status),Ae=(e,t)=>(0,a.jsx)("div",{className:"mt-2 space-y-2",children:e.map((e=>{var s;return(0,a.jsxs)("div",{className:"flex items-center text-sm p-2 bg-gray-100 rounded border border-gray-200 group",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 mr-3 text-gray-500 flex-shrink-0"}),oe===e.id?(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-2 min-w-0 bg-white p-1 rounded border border-blue-300 ring-2 ring-blue-100",children:[(0,a.jsx)("input",{type:"text",value:de,onChange:e=>me(e.target.value),className:"flex-1 p-1 text-sm outline-none bg-white text-gray-900",autoFocus:!0,onKeyDown:s=>{"Enter"===s.key&&(s.preventDefault(),je(e.id,t)),"Escape"===s.key&&ve()}}),(0,a.jsxs)("div",{className:"flex items-center border-l pl-1 space-x-1",children:[(0,a.jsx)("button",{onClick:()=>je(e.id,t),className:"p-1 hover:bg-green-100 text-green-600 rounded transition-colors",title:"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01\u0e0a\u0e37\u0e48\u0e2d",children:(0,a.jsx)(b.Z,{size:16})}),(0,a.jsx)("button",{onClick:ve,className:"p-1 hover:bg-red-100 text-red-500 rounded transition-colors",title:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",children:(0,a.jsx)(f.Z,{size:16})})]})]}):(0,a.jsxs)("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[(0,a.jsx)("span",{onClick:()=>(e=>{const t=URL.createObjectURL(e.file);if("application/pdf"===e.file.type||e.file.name.toLowerCase().endsWith(".pdf")){var s;const a={fileName:e.customName||(null===(s=e.uploadedData)||void 0===s?void 0:s.fileName)||e.file.name,fileUrl:t,filePath:"",size:e.file.size,fileSize:e.file.size,contentType:e.file.type,uploadedAt:(new Date).toISOString(),uploadedBy:(null===u||void 0===u?void 0:u.id)||""};ie(a)}else window.open(t,"_blank")})(e),className:"truncate cursor-pointer text-blue-600 hover:underline font-medium",title:"\u0e04\u0e25\u0e34\u0e01\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e14\u0e39\u0e15\u0e31\u0e27\u0e2d\u0e22\u0e48\u0e32\u0e07",children:e.customName||(null===(s=e.uploadedData)||void 0===s?void 0:s.fileName)||e.file.name}),(0,a.jsx)("button",{onClick:()=>(e=>{var t;ce(e.id);const s=e.customName||(null===(t=e.uploadedData)||void 0===t?void 0:t.fileName)||e.file.name;me(s)})(e),className:"opacity-0 group-hover:opacity-100 p-1 text-gray-400 hover:text-blue-600 rounded transition-all",title:"\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e0a\u0e37\u0e48\u0e2d\u0e44\u0e1f\u0e25\u0e4c",children:(0,a.jsx)(y,{size:14})})]}),oe!==e.id&&(0,a.jsxs)("div",{className:"flex items-center ml-3 space-x-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:["uploading"===e.status&&(0,a.jsx)(o.Z,{className:"w-4 h-4 text-blue-500"}),"success"===e.status&&(0,a.jsx)(b.Z,{className:"w-4 h-4 text-green-500"}),"error"===e.status&&(0,a.jsx)("span",{title:e.error,children:(0,a.jsx)(j.Z,{className:"w-4 h-4 text-red-500"})})]}),(0,a.jsx)("button",{type:"button",onClick:()=>((e,t)=>{("revision"===t?L:V)((t=>t.filter((t=>t.id!==e))))})(e.id,t),className:"text-gray-400 hover:text-red-600 transition-colors p-1 hover:bg-red-50 rounded",title:"\u0e25\u0e1a\u0e44\u0e1f\u0e25\u0e4c",children:(0,a.jsx)(v.Z,{size:16})})]})]},e.id)}))});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start p-4 border-b",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-blue-600",children:N.documentNumber}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:N.taskName})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>G(!0),className:"flex items-center text-sm text-gray-500 hover:text-blue-600",children:[(0,a.jsx)(g.Z,{size:16,className:"mr-1"})," \u0e14\u0e39\u0e1b\u0e23\u0e30\u0e27\u0e31\u0e15\u0e34"]}),(0,a.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(f.Z,{size:24})})]})]}),(0,a.jsxs)("div",{className:"p-6 overflow-y-auto space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"text-gray-700 font-semibold block mb-1",children:"\u0e2a\u0e16\u0e32\u0e19\u0e30:"}),(0,a.jsx)("span",{className:"px-3 py-1 text-xs font-bold text-white rounded-full shadow-sm",style:{backgroundColor:Re.color},children:Re.text})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"text-gray-700 font-semibold block",children:"\u0e42\u0e04\u0e23\u0e07\u0e01\u0e32\u0e23:"}),(0,a.jsx)("span",{className:"text-gray-900",children:(null===(i=N.site)||void 0===i?void 0:i.name)||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"text-gray-700 font-semibold block",children:"\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e40\u0e23\u0e34\u0e48\u0e21 (\u0e41\u0e1c\u0e19):"}),(0,a.jsx)("span",{className:"text-gray-900",children:D(N.planStartDate,!1)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"text-gray-700 font-semibold block",children:"\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e01\u0e33\u0e2b\u0e19\u0e14\u0e2a\u0e48\u0e07:"}),(0,a.jsx)("span",{className:"text-gray-900",children:D(N.dueDate,!1)})]})]}),N.description&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("strong",{className:"text-gray-700 font-semibold block text-sm",children:"\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14:"}),(0,a.jsx)("div",{className:"text-gray-900 whitespace-pre-wrap bg-white p-3 rounded-md mt-1 border border-gray-300 shadow-sm",children:(0,a.jsxs)("p",{children:['"',N.description,'"']})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-md font-semibold mb-2 flex items-center text-slate-800",children:[(0,a.jsx)(w.Z,{size:16,className:"mr-2"})," \u0e44\u0e1f\u0e25\u0e4c\u0e41\u0e19\u0e1a"]}),(0,a.jsx)("ul",{className:"space-y-2",children:be.length>0?be.map(((e,t)=>{const s=e.fileName.toLowerCase().endsWith(".pdf")||"application/pdf"===e.contentType;return(0,a.jsx)("li",{children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-100 border border-slate-200 rounded-md hover:bg-slate-200 transition-colors group",children:[(0,a.jsxs)("div",{className:"flex items-center min-w-0 flex-1 cursor-pointer",onClick:()=>s?ie(e):window.open(e.fileUrl),children:[(0,a.jsx)(c.Z,{className:"w-5 h-5 text-gray-500 mr-3 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-blue-600 group-hover:underline truncate",children:e.fileName}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:I(e.fileSize||e.size)})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 ml-2",children:[s&&(0,a.jsx)("button",{onClick:()=>ie(e),className:"p-1 text-gray-400 hover:text-blue-600",title:"\u0e14\u0e39/\u0e41\u0e01\u0e49\u0e44\u0e02 PDF",children:(0,a.jsx)(E.Z,{size:18})}),!s&&(0,a.jsx)("a",{href:e.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"p-1 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(k.Z,{size:18})})]})]})},t)})):(0,a.jsx)("p",{className:"text-sm text-gray-500 italic",children:"\u0e44\u0e21\u0e48\u0e21\u0e35\u0e44\u0e1f\u0e25\u0e4c\u0e41\u0e19\u0e1a"})})]})]}),(0,a.jsxs)("div",{className:"p-4 border-t bg-slate-50",children:[pe&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-800",children:"\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23 (\u0e2a\u0e33\u0e2b\u0e23\u0e31\u0e1a PM/PD)"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0e40\u0e2b\u0e15\u0e38\u0e1c\u0e25\u0e43\u0e19\u0e01\u0e32\u0e23\u0e44\u0e21\u0e48\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34 (\u0e16\u0e49\u0e32\u0e21\u0e35)"}),(0,a.jsx)("textarea",{value:re,onChange:e=>ne(e.target.value),rows:3,placeholder:"\u0e01\u0e23\u0e2d\u0e01\u0e40\u0e2b\u0e15\u0e38\u0e1c\u0e25\u0e17\u0e35\u0e48\u0e44\u0e21\u0e48\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34...",className:"w-full p-2 border rounded-md bg-white text-gray-900"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,a.jsxs)("button",{onClick:()=>ke("REJECT_DRAFT"),disabled:O,className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:bg-red-300 disabled:cursor-not-allowed",children:[(0,a.jsx)(m.Z,{size:16,className:"mr-2"})," ",O?"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23...":"\u0e44\u0e21\u0e48\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34"]}),(0,a.jsxs)("button",{onClick:()=>ke("APPROVE_DRAFT"),disabled:O,className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 disabled:bg-green-300 disabled:cursor-not-allowed",children:[(0,a.jsx)(d.Z,{size:16,className:"mr-2"})," ",O?"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34...":"\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34 (\u0e2a\u0e48\u0e07\u0e43\u0e2b\u0e49 BIM)"]})]})]}),ue&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-800",children:"\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23 (\u0e2a\u0e33\u0e2b\u0e23\u0e31\u0e1a Site)"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0e41\u0e19\u0e1a\u0e44\u0e1f\u0e25\u0e4c\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e40\u0e15\u0e34\u0e21 (\u0e16\u0e49\u0e32\u0e21\u0e35)"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-500 transition-colors",children:[(0,a.jsx)("input",{type:"file",multiple:!0,onChange:e=>ye(e,"action"),id:"site-file-upload",className:"hidden"}),(0,a.jsxs)("label",{htmlFor:"site-file-upload",className:"cursor-pointer text-blue-600 hover:text-blue-800 font-medium flex items-center justify-center",children:[(0,a.jsx)(R.Z,{size:16,className:"mr-2"})," \u0e04\u0e25\u0e34\u0e01\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e44\u0e1f\u0e25\u0e4c"]})]}),W.length>0&&Ae(W,"action")]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0e2b\u0e21\u0e32\u0e22\u0e40\u0e2b\u0e15\u0e38 / \u0e04\u0e2d\u0e21\u0e40\u0e21\u0e19\u0e15\u0e4c (\u0e16\u0e49\u0e32\u0e21\u0e35)"}),(0,a.jsx)("textarea",{value:z,onChange:e=>Z(e.target.value),rows:3,placeholder:"\u0e2b\u0e32\u0e01\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e43\u0e2b\u0e49\u0e41\u0e01\u0e49\u0e44\u0e02 \u0e01\u0e23\u0e38\u0e13\u0e32\u0e43\u0e2a\u0e48\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14...",className:"w-full p-2 border rounded-md bg-white text-gray-900"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,a.jsxs)("button",{onClick:()=>Ee("REQUEST_REVISION"),disabled:O,className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-orange-600 rounded-lg hover:bg-orange-700 disabled:bg-orange-300",children:[(0,a.jsx)(A,{size:16,className:"mr-2"}),O?"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e2a\u0e48\u0e07...":"\u0e2a\u0e48\u0e07\u0e01\u0e25\u0e31\u0e1a\u0e43\u0e2b\u0e49\u0e41\u0e01\u0e49\u0e44\u0e02"]}),(0,a.jsxs)("button",{onClick:()=>Ee("COMPLETE"),disabled:O,className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 disabled:bg-green-300",children:[(0,a.jsx)(b.Z,{size:16,className:"mr-2"}),O?"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e1b\u0e34\u0e14\u0e07\u0e32\u0e19...":"\u0e15\u0e23\u0e27\u0e08\u0e23\u0e31\u0e1a\u0e41\u0e25\u0e30\u0e1b\u0e34\u0e14\u0e07\u0e32\u0e19"]})]})]}),xe&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-800",children:"\u0e2a\u0e48\u0e07\u0e21\u0e2d\u0e1a\u0e07\u0e32\u0e19 (Submit Work)"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["\u0e41\u0e19\u0e1a\u0e44\u0e1f\u0e25\u0e4c\u0e1c\u0e25\u0e07\u0e32\u0e19 ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-500 transition-colors",children:[(0,a.jsx)("input",{type:"file",multiple:!0,onChange:e=>ye(e,"action"),id:"submit-file-upload",className:"hidden"}),(0,a.jsxs)("label",{htmlFor:"submit-file-upload",className:"cursor-pointer text-blue-600 hover:text-blue-800 font-medium flex items-center justify-center",children:[(0,a.jsx)(R.Z,{size:16,className:"mr-2"})," \u0e04\u0e25\u0e34\u0e01\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e44\u0e1f\u0e25\u0e4c"]})]}),W.length>0&&Ae(W,"action")]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0e2b\u0e21\u0e32\u0e22\u0e40\u0e2b\u0e15\u0e38 / \u0e04\u0e2d\u0e21\u0e40\u0e21\u0e19\u0e15\u0e4c (\u0e16\u0e49\u0e32\u0e21\u0e35)"}),(0,a.jsx)("textarea",{value:z,onChange:e=>Z(e.target.value),rows:3,placeholder:"\u0e2d\u0e18\u0e34\u0e1a\u0e32\u0e22\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14\u0e01\u0e32\u0e23\u0e17\u0e33\u0e07\u0e32\u0e19...",className:"w-full p-2 border rounded-md bg-white text-gray-900"})]}),(0,a.jsx)("div",{className:"flex justify-end pt-2",children:(0,a.jsxs)("button",{onClick:()=>(async e=>{if(N&&h){$(!0);try{const t=await h.getIdToken(),a=W.filter((e=>"success"===e.status));if(0===a.length)return p("warning","\u0e01\u0e23\u0e38\u0e13\u0e32\u0e41\u0e19\u0e1a\u0e44\u0e1f\u0e25\u0e4c","\u0e15\u0e49\u0e2d\u0e07\u0e41\u0e19\u0e1a\u0e44\u0e1f\u0e25\u0e4c\u0e1c\u0e25\u0e07\u0e32\u0e19\u0e2d\u0e22\u0e48\u0e32\u0e07\u0e19\u0e49\u0e2d\u0e22 1 \u0e44\u0e1f\u0e25\u0e4c"),void $(!1);const r={action:e,payload:{comments:z,files:a.map((e=>e.uploadedData))}},l=await fetch("/api/work-request/".concat(N.id,"/update"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(r)}),i=await l.json();if(!i.success)throw new Error(i.error);p("success","\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08","\u0e2a\u0e16\u0e32\u0e19\u0e30\u0e16\u0e39\u0e01\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e40\u0e1b\u0e47\u0e19: ".concat(_(i.newStatus).text)),n(),s()}catch(t){p("error","\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14",t instanceof Error?t.message:"Unknown error")}finally{$(!1)}}})("SUBMIT_WORK"),disabled:0===W.filter((e=>"success"===e.status)).length||O,className:"flex items-center px-6 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 disabled:bg-green-300",children:[O?(0,a.jsx)(o.Z,{className:"w-5 h-5 mr-2"}):(0,a.jsx)(T.Z,{size:16,className:"mr-2"}),O?"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e2a\u0e48\u0e07\u0e07\u0e32\u0e19...":"\u0e2a\u0e48\u0e07\u0e07\u0e32\u0e19\u0e43\u0e2b\u0e49 Site \u0e15\u0e23\u0e27\u0e08\u0e23\u0e31\u0e1a"]})})]}),he&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-800",children:"\u0e2a\u0e23\u0e49\u0e32\u0e07\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23\u0e09\u0e1a\u0e31\u0e1a\u0e41\u0e01\u0e49\u0e44\u0e02 (Create Revision)"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23\u0e40\u0e14\u0e34\u0e21:"})," ",N.documentNumber]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23\u0e43\u0e2b\u0e21\u0e48:"})," ",fe]})]}),(Q||ee)&&(0,a.jsxs)("div",{className:"mb-4 p-3 rounded-md text-sm font-medium flex items-center border bg-white",children:[Q&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-3 text-gray-500"}),(0,a.jsx)("span",{className:"text-gray-600",children:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e15\u0e23\u0e27\u0e08\u0e2a\u0e2d\u0e1a Task \u0e43\u0e19\u0e23\u0e30\u0e1a\u0e1a BIM Tracking..."})]}),ee&&(0,a.jsx)("span",{className:"text-red-600 font-semibold",children:ee})]}),Y&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["\u0e41\u0e19\u0e1a\u0e44\u0e1f\u0e25\u0e4c\u0e17\u0e35\u0e48\u0e41\u0e01\u0e49\u0e44\u0e02\u0e41\u0e25\u0e49\u0e27 ",(0,a.jsx)("span",{className:"text-red-700",children:"*"})]}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-4 text-center hover:border-blue-500 transition-colors",children:[(0,a.jsx)("input",{type:"file",multiple:!0,onChange:e=>ye(e,"revision"),id:"revision-file-upload",className:"hidden"}),(0,a.jsxs)("label",{htmlFor:"revision-file-upload",className:"cursor-pointer text-blue-600 hover:text-blue-800 font-medium flex items-center justify-center",children:[(0,a.jsx)(R.Z,{size:16,className:"mr-2"}),"\u0e04\u0e25\u0e34\u0e01\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e44\u0e1f\u0e25\u0e4c"]})]}),q.length>0&&Ae(q,"revision")]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"\u0e2b\u0e21\u0e32\u0e22\u0e40\u0e2b\u0e15\u0e38\u0e01\u0e32\u0e23\u0e41\u0e01\u0e49\u0e44\u0e02 (Optional)"}),(0,a.jsx)("textarea",{value:U,onChange:e=>J(e.target.value),placeholder:"\u0e40\u0e0a\u0e48\u0e19 \u0e41\u0e01\u0e49\u0e44\u0e02\u0e15\u0e32\u0e21 Comment \u0e08\u0e32\u0e01 CM...",className:"w-full p-2 border rounded-md text-sm bg-white text-gray-900",rows:2})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)("button",{onClick:async()=>{const e=q.filter((e=>"success"===e.status));if(0!==e.length)if(se){$(!0);try{const t=await(null===h||void 0===h?void 0:h.getIdToken()),a={originalDocId:N.id,uploadedFiles:e.map((e=>e.uploadedData)),comments:U,verifiedTaskId:se},r=await fetch("/api/work-request/create_revision",{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(a)}),l=await r.json();if(!l.success)throw new Error(l.error||"\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14\u0e43\u0e19\u0e01\u0e32\u0e23\u0e2a\u0e23\u0e49\u0e32\u0e07 Revision");p("success","\u0e2a\u0e23\u0e49\u0e32\u0e07 Revision \u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08!","\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23\u0e09\u0e1a\u0e31\u0e1a\u0e43\u0e2b\u0e21\u0e48 ".concat(l.newDocumentNumber," \u0e16\u0e39\u0e01\u0e2a\u0e48\u0e07\u0e43\u0e2b\u0e49 Site \u0e15\u0e23\u0e27\u0e08\u0e2a\u0e2d\u0e1a\u0e41\u0e25\u0e49\u0e27")),n(),s()}catch(t){p("error","\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14",t instanceof Error?t.message:"Unknown error")}finally{$(!1)}}else p("error","Task \u0e44\u0e21\u0e48\u0e16\u0e39\u0e01\u0e15\u0e49\u0e2d\u0e07","\u0e44\u0e21\u0e48\u0e1e\u0e1a Task ID \u0e17\u0e35\u0e48\u0e15\u0e23\u0e27\u0e08\u0e2a\u0e2d\u0e1a\u0e41\u0e25\u0e49\u0e27");else p("warning","\u0e01\u0e23\u0e38\u0e13\u0e32\u0e41\u0e19\u0e1a\u0e44\u0e1f\u0e25\u0e4c","\u0e15\u0e49\u0e2d\u0e07\u0e41\u0e19\u0e1a\u0e44\u0e1f\u0e25\u0e4c\u0e09\u0e1a\u0e31\u0e1a\u0e41\u0e01\u0e49\u0e44\u0e02\u0e2d\u0e22\u0e48\u0e32\u0e07\u0e19\u0e49\u0e2d\u0e22 1 \u0e44\u0e1f\u0e25\u0e4c")},disabled:O||0===q.filter((e=>"success"===e.status)).length||!Y,className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:[O?(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-2"}):(0,a.jsx)(T.Z,{size:16,className:"mr-2"}),"\u0e2a\u0e48\u0e07\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23\u0e09\u0e1a\u0e31\u0e1a\u0e41\u0e01\u0e49\u0e44\u0e02"]})})]})]})]})]})}),B&&(0,a.jsx)(M,{workflow:N.workflow||[],onClose:()=>G(!1)}),(0,a.jsx)(C.Z,{isOpen:!!le,file:le,allowEdit:ue||xe||he,onClose:()=>ie(null),onSave:async e=>{console.log("Annotated File Received:",e);let t="action";he&&(t="revision"),await we([e],t),p("success","\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01\u0e41\u0e25\u0e30\u0e41\u0e19\u0e1a\u0e44\u0e1f\u0e25\u0e4c\u0e40\u0e23\u0e35\u0e22\u0e1a\u0e23\u0e49\u0e2d\u0e22","\u0e44\u0e1f\u0e25\u0e4c\u0e17\u0e35\u0e48\u0e04\u0e38\u0e13\u0e41\u0e01\u0e49\u0e44\u0e02\u0e16\u0e39\u0e01\u0e41\u0e19\u0e1a\u0e43\u0e19\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e40\u0e15\u0e23\u0e35\u0e22\u0e21\u0e2a\u0e48\u0e07\u0e41\u0e25\u0e49\u0e27"),ie(null)}})]})}var K=s(17207);const F=(0,N.Z)("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);var O=s(82431),$=s(99397),z=s(6855),Z=s(5978),W=s(71550);const V=e=>{let{isOpen:t,onClose:s,onSubmit:n,isSubmitting:l}=e;const[i,c]=(0,r.useState)(""),[d,x]=(0,r.useState)("");return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-[70] flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"\u0e40\u0e2b\u0e15\u0e38\u0e1c\u0e25\u0e43\u0e19\u0e01\u0e32\u0e23\u0e44\u0e21\u0e48\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34"}),(0,a.jsx)("button",{onClick:s,disabled:l,className:"text-gray-400 hover:text-gray-600 disabled:opacity-50",children:(0,a.jsx)(f.Z,{size:24})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsx)("textarea",{value:i,onChange:e=>{c(e.target.value),x("")},rows:4,placeholder:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e23\u0e30\u0e1a\u0e38\u0e40\u0e2b\u0e15\u0e38\u0e1c\u0e25...",className:"w-full p-2 border rounded-md ".concat(d?"border-red-500":"border-gray-300"," bg-white text-gray-900"),disabled:l}),d&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:d})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-4 p-4 border-t bg-gray-50",children:[(0,a.jsx)("button",{onClick:s,disabled:l,className:"px-4 py-2 text-sm text-gray-700 bg-white border rounded-lg hover:bg-gray-100 disabled:opacity-50",children:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01"}),(0,a.jsxs)("button",{onClick:()=>{i.trim()?n(i):x("\u0e01\u0e23\u0e38\u0e13\u0e32\u0e01\u0e23\u0e2d\u0e01\u0e40\u0e2b\u0e15\u0e38\u0e1c\u0e25")},disabled:l,className:"flex items-center px-4 py-2 text-sm text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:bg-red-300",children:[l?(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-2"}):(0,a.jsx)(m.Z,{size:16,className:"mr-2"}),"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e44\u0e21\u0e48\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34"]})]})]})}):null};function B(){const{user:e,firebaseUser:t}=(0,l.a)(),[s,i]=((0,n.useRouter)(),(0,r.useState)([])),[c,u]=(0,r.useState)([]),[h,g]=(0,r.useState)(!0),[f,b]=(0,r.useState)(null),[N,y]=(0,r.useState)(!1),{showNotification:j}=(0,S.l)(),[v,w]=(0,r.useState)([]),[E,k]=(0,r.useState)(!1),[R,A]=(0,r.useState)(!1),[T,C]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{if(t)try{if((null===e||void 0===e?void 0:e.sites)&&e.sites.length>0){const t=(0,Z.IO)((0,Z.hJ)(z.db,"sites"),(0,Z.ar)((0,Z.Jm)(),"in",e.sites));(0,Z.cf)(t,(e=>{const t=e.docs.map((e=>({id:e.id,name:e.data().name,userOverrides:e.data().userOverrides})));u(t)}))}}catch(s){console.error("Failed to fetch sites",s)}})()}),[t,e]),(0,r.useEffect)((()=>{if(!t||!(null===e||void 0===e?void 0:e.sites)||0===e.sites.length)return void g(!1);g(!0);const s=(0,Z.IO)((0,Z.hJ)(z.db,"workRequests"),(0,Z.ar)("siteId","in",e.sites),(0,Z.Xo)("updatedAt","desc")),a=(0,Z.cf)(s,(e=>{const t=[];e.forEach((e=>{const s=e.data();t.push({id:e.id,documentNumber:s.documentNumber||"",runningNumber:s.runningNumber||"",taskName:s.taskName||"",description:s.description||"",status:s.status,createdAt:s.createdAt,updatedAt:s.updatedAt,createdBy:s.createdBy||"",assignedTo:s.assignedTo||void 0,planStartDate:s.planStartDate,dueDate:s.dueDate,taskData:s.taskData||null,revisionNumber:s.revisionNumber||0,isLatest:s.isLatest||!1,parentWorkRequestId:s.parentWorkRequestId||void 0,files:s.files||[],workflow:s.workflow||[],usersInfo:s.usersInfo||{},site:{id:s.siteId,name:"..."}})})),i(t),g(!1)}),(e=>{console.error("Failed to fetch real-time work requests:",e),g(!1)}));return()=>a()}),[t,e]);const I=(0,r.useMemo)((()=>{if(0===c.length)return s;const e=new Map(c.map((e=>[e.id,e.name])));return s.map((t=>({...t,site:{id:t.site.id,name:e.get(t.site.id)||"Unknown Site"}})))}),[s,c]),D=(0,r.useMemo)((()=>{if(!e)return!1;const t="WR.".concat(W.S4.WORK_REQUEST.CREATE),[s,a]=t.split("."),r=(W.yB[t]||[]).includes(e.role);return c.some((t=>{var n,l,i;const o=null===(i=t.userOverrides)||void 0===i||null===(l=i[e.id])||void 0===l||null===(n=l[s])||void 0===n?void 0:n[a];return void 0!==o?!0===o:r}))}),[e,c]),_=(e&&x.c9.includes(e.role),e&&x.$p.includes(e.role)),M=(0,r.useCallback)((async(e,s)=>{const a=T?[T]:v;if(0!==a.length){k(!0);try{if(!t)throw new Error("\u0e01\u0e23\u0e38\u0e13\u0e32\u0e25\u0e47\u0e2d\u0e01\u0e2d\u0e34\u0e19\u0e01\u0e48\u0e2d\u0e19");const r=await t.getIdToken(),n=await fetch("/api/work-request/batch-update",{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({ids:a,action:e,payload:{comments:s||""}})}),l=await n.json();if(!l.success)throw new Error(l.error||"\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14\u0e43\u0e19\u0e01\u0e32\u0e23 ".concat(e));j("success","\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08!","".concat("APPROVE_DRAFT"===e?"\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34":"\u0e44\u0e21\u0e48\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34"," ").concat(l.updatedCount," \u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e40\u0e23\u0e35\u0e22\u0e1a\u0e23\u0e49\u0e2d\u0e22\u0e41\u0e25\u0e49\u0e27")),w([]),A(!1),C(null)}catch(r){j("error","\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14",r instanceof Error?r.message:"Unknown error")}finally{k(!1)}}}),[t,v,T,j]),B=(0,r.useCallback)((async(e,s,a)=>{k(!0);try{if(!t)throw new Error("\u0e01\u0e23\u0e38\u0e13\u0e32\u0e25\u0e47\u0e2d\u0e01\u0e2d\u0e34\u0e19\u0e01\u0e48\u0e2d\u0e19");const r=await t.getIdToken(),n=await fetch("/api/work-request/".concat(s,"/update"),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({action:e,payload:{comments:a||""}})}),l=await n.json();if(!l.success)throw new Error(l.error||"\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14\u0e43\u0e19\u0e01\u0e32\u0e23 ".concat(e));j("success","\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08!","".concat("APPROVE_DRAFT"===e?"\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34":"\u0e44\u0e21\u0e48\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34","\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23\u0e40\u0e23\u0e35\u0e22\u0e1a\u0e23\u0e49\u0e2d\u0e22\u0e41\u0e25\u0e49\u0e27")),A(!1),C(null)}catch(r){j("error","\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14",r instanceof Error?r.message:"Unknown error")}finally{k(!1)}}),[t,j]);return(0,a.jsxs)("div",{className:"max-w-screen-2xl mx-auto flex flex-col h-full",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-3",children:[(0,a.jsx)(F,{className:"text-orange-600",size:32}),"Work Requests"]}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e04\u0e33\u0e23\u0e49\u0e2d\u0e07\u0e02\u0e2d\u0e07\u0e32\u0e19\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14 (Real-time)"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[(0,a.jsxs)("button",{className:"flex items-center px-3 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-default",disabled:!0,children:[(0,a.jsx)(O.Z,{className:"w-4 h-4 mr-2 ".concat(h?"animate-spin":"")}),"Real-time Sync"]}),D&&(0,a.jsxs)("button",{onClick:()=>y(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,a.jsx)($.Z,{className:"w-4 h-4 mr-2"}),"\u0e2a\u0e23\u0e49\u0e32\u0e07 Work Request"]})]})]})}),_&&(0,a.jsxs)("div",{className:"bg-white p-3 rounded-lg shadow border border-gray-200 flex items-center space-x-3",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e17\u0e35\u0e48\u0e40\u0e25\u0e37\u0e2d\u0e01 (",v.length,"):"]}),(0,a.jsxs)("button",{onClick:()=>{0!==v.length&&M("APPROVE_DRAFT")},disabled:0===v.length||E,className:"flex items-center px-3 py-1.5 text-xs font-medium text-white bg-green-600 rounded-md hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:[E?(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-1"}):(0,a.jsx)(d.Z,{size:14,className:"mr-1"})," \u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34"]}),(0,a.jsxs)("button",{onClick:()=>{0!==v.length&&(C(null),A(!0))},disabled:0===v.length||E,className:"flex items-center px-3 py-1.5 text-xs font-medium text-white bg-red-600 rounded-md hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:[E?(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-1"}):(0,a.jsx)(m.Z,{size:14,className:"mr-1"})," \u0e44\u0e21\u0e48\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34"]}),E&&(0,a.jsx)("span",{className:"text-xs text-gray-500 italic",children:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23..."})]}),(0,a.jsx)("div",{className:"flex-1 min-h-0",children:(0,a.jsx)(p,{documents:I,isLoading:h,onDocumentClick:e=>{b(e.id)},selectedIds:v,onSelectionChange:w,onApproveRejectClick:(e,t)=>{"APPROVE_DRAFT"===e?(e=>{B("APPROVE_DRAFT",e)})(t):"REJECT_DRAFT"===e&&(e=>{C(e),A(!0)})(t)}})}),f&&(0,a.jsx)(P,{documentId:f,onClose:()=>{b(null)},onUpdate:()=>{}}),N&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",children:(0,a.jsx)("div",{className:"w-full max-w-4xl bg-white rounded-lg shadow-xl p-6",children:(0,a.jsx)(K.Z,{onClose:()=>{y(!1)},userProp:e||void 0})})}),(0,a.jsx)(V,{isOpen:R,onClose:()=>{A(!1),C(null)},onSubmit:T?e=>{T&&B("REJECT_DRAFT",T,e)}:e=>{M("REJECT_DRAFT",e)},isSubmitting:E})]})}function G(){return(0,a.jsx)(i.AuthGuard,{requiredRoles:[x.K$.ADMIN,x.K$.SITE_ADMIN,x.K$.BIM,...x.c9,...x.$p],children:(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"text-center p-8",children:"Loading Page..."}),children:(0,a.jsx)(B,{})})})}},71550:function(e,t,s){"use strict";s.d(t,{S4:function(){return r},l8:function(){return i},yB:function(){return l}});var a=s(453);const r={RFA:{VIEW_SHOP:"view_shop",CREATE_SHOP:"create_shop",VIEW_GEN:"view_gen",CREATE_GEN:"create_gen",VIEW_MAT:"view_mat",CREATE_MAT:"create_mat",APPROVE:"can_approve"},WORK_REQUEST:{VIEW:"view_wr",CREATE:"create_wr",APPROVE:"approve_wr",VERIFY:"verify_wr"}},n=(a.K$.ADMIN,a.K$.PD,a.K$.PM,a.K$.SE,a.K$.FM,a.K$.BIM,a.K$.SITE_ADMIN,a.K$.CM,a.K$.ME,a.K$.SN,a.K$.OE,a.K$.PE,[a.K$.ADMIN,a.K$.PD,a.K$.PM,a.K$.BIM,a.K$.SITE_ADMIN,a.K$.CM,a.K$.ME,a.K$.SN,a.K$.OE,a.K$.PE]),l={["RFA.".concat(r.RFA.VIEW_SHOP)]:n,["RFA.".concat(r.RFA.CREATE_SHOP)]:[a.K$.BIM,a.K$.ME,a.K$.SN,a.K$.SITE_ADMIN,a.K$.ADMIN,a.K$.PM,a.K$.PE,a.K$.OE],["RFA.".concat(r.RFA.VIEW_GEN)]:n,["RFA.".concat(r.RFA.CREATE_GEN)]:[a.K$.BIM,a.K$.ME,a.K$.SN,a.K$.SITE_ADMIN,a.K$.ADMIN,a.K$.PM,a.K$.PE,a.K$.OE],["RFA.".concat(r.RFA.VIEW_MAT)]:n,["RFA.".concat(r.RFA.CREATE_MAT)]:[a.K$.SITE_ADMIN,a.K$.ADMIN,a.K$.PM,a.K$.PE,a.K$.OE],["RFA.".concat(r.RFA.APPROVE)]:[a.K$.CM,a.K$.ADMIN,a.K$.SITE_ADMIN,a.K$.PM,a.K$.PE,a.K$.OE],["WR.".concat(r.WORK_REQUEST.VIEW)]:n,["WR.".concat(r.WORK_REQUEST.CREATE)]:[a.K$.PE,a.K$.OE,a.K$.ADMIN],["WR.".concat(r.WORK_REQUEST.APPROVE)]:[a.K$.PM,a.K$.ADMIN],["WR.".concat(r.WORK_REQUEST.VERIFY)]:[a.K$.SITE_ADMIN,a.K$.ADMIN,a.K$.BIM]},i=[{title:"RFA - Shop Drawing",permissions:[{key:"RFA.".concat(r.RFA.VIEW_SHOP),label:"\u0e40\u0e02\u0e49\u0e32\u0e14\u0e39 (View)"},{key:"RFA.".concat(r.RFA.CREATE_SHOP),label:"\u0e2a\u0e23\u0e49\u0e32\u0e07 (Create)"}]},{title:"RFA - General",permissions:[{key:"RFA.".concat(r.RFA.VIEW_GEN),label:"\u0e40\u0e02\u0e49\u0e32\u0e14\u0e39 (View)"},{key:"RFA.".concat(r.RFA.CREATE_GEN),label:"\u0e2a\u0e23\u0e49\u0e32\u0e07 (Create)"}]},{title:"RFA - Material",permissions:[{key:"RFA.".concat(r.RFA.VIEW_MAT),label:"\u0e40\u0e02\u0e49\u0e32\u0e14\u0e39 (View)"},{key:"RFA.".concat(r.RFA.CREATE_MAT),label:"\u0e2a\u0e23\u0e49\u0e32\u0e07 (Create)"}]},{title:"RFA - Approval",permissions:[{key:"RFA.".concat(r.RFA.APPROVE),label:"\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23 (Approve)"}]},{title:"Work Request",permissions:[{key:"WR.".concat(r.WORK_REQUEST.VIEW),label:"\u0e40\u0e02\u0e49\u0e32\u0e14\u0e39 (View)"},{key:"WR.".concat(r.WORK_REQUEST.CREATE),label:"\u0e2a\u0e23\u0e49\u0e32\u0e07\u0e43\u0e1a\u0e04\u0e33\u0e02\u0e2d (Create)"},{key:"WR.".concat(r.WORK_REQUEST.APPROVE),label:"\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34\u0e43\u0e1a\u0e04\u0e33\u0e02\u0e2d (PM)"},{key:"WR.".concat(r.WORK_REQUEST.VERIFY),label:"\u0e15\u0e23\u0e27\u0e08\u0e23\u0e31\u0e1a\u0e07\u0e32\u0e19 (Site)"}]}]}},function(e){e.O(0,[609,15,788,134,958,649,552,933,971,997,744],(function(){return t=15750,e(e.s=t);var t}));var t=e.O();_N_E=t}]);