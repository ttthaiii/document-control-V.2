(()=>{var e={};e.id=7702,e.ids=[7702],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},32776:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>o}),s(38256),s(22834),s(87666),s(35866);var r=s(23191),a=s(88716),l=s(37922),i=s.n(l),n=s(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let o=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,38256)),"D:\\ttsdoc-v2\\src\\app\\dashboard\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,22834)),"D:\\ttsdoc-v2\\src\\app\\dashboard\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,87666)),"D:\\ttsdoc-v2\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\ttsdoc-v2\\src\\app\\dashboard\\page.tsx"],x="/dashboard/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},14669:(e,t,s)=>{Promise.resolve().then(s.bind(s,7022))},89176:(e,t,s)=>{Promise.resolve().then(s.bind(s,31422))},7022:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(10326),a=s(17577),l=s(28882);function i({children:e}){return r.jsx(a.Suspense,{fallback:r.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),children:r.jsx(l.Z,{children:e})})}},31422:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s(10326),a=s(17577),l=s(32875),i=s(26107),n=s(88307),d=s(38787),o=s(40765),c=s(62881);let x=(0,c.Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),u=(0,c.Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var p=s(36283),m=s(79821),h=s(7619),f=s(31539);let g=e=>{if(!e)return"N/A";if(e._seconds)return new Date(1e3*e._seconds).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});if("function"==typeof e.toDate)return e.toDate().toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});let t=new Date(e);return isNaN(t.getTime())?"Invalid Date":t.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"})},b=()=>{let[e,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=()=>t(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e};function y(){let{user:e,firebaseUser:t}=(0,i.aC)(),s=b(),[l,c]=(0,a.useState)(!1),[y,j]=(0,a.useState)([]),[v,N]=(0,a.useState)([]),[w,D]=(0,a.useState)(""),[q,C]=(0,a.useState)("ALL"),[P,S]=(0,a.useState)("ALL"),[L,k]=(0,a.useState)([]),[_,A]=(0,a.useState)(!0),[Z,z]=(0,a.useState)(null),[E,G]=(0,a.useState)(null),M=(0,a.useMemo)(()=>{if(!w)return L;let e=w.toLowerCase();return L.filter(t=>t.title.toLowerCase().includes(e)||t.documentNumber.toLowerCase().includes(e))},[w,L]),T=e=>{"application/pdf"===e.contentType||e.fileName.toLowerCase().endsWith(".pdf")?G(e):window.open(e.fileUrl,"_blank")};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsxs)("div",{className:"p-4 border-b",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"\uD83D\uDCDA คลังเอกสารอนุมัติ (Approved Document Library)"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx(n.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"ค้นหา...",className:"w-full pl-10 pr-4 py-2 border rounded-lg",value:w,onChange:e=>D(e.target.value)})]}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(d.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsxs)("select",{className:"w-full pl-10 pr-4 py-2 border rounded-lg appearance-none",value:q,onChange:e=>C(e.target.value),children:[r.jsx("option",{value:"ALL",children:"ทุกโครงการ"}),y.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(o.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsxs)("select",{className:"w-full pl-10 pr-4 py-2 border rounded-lg appearance-none",value:P,onChange:e=>S(e.target.value),children:[r.jsx("option",{value:"ALL",children:"ทุกหมวดงาน"}),v.map(e=>r.jsx("option",{value:e.id,children:e.categoryCode},e.id))]})]})]}),Z&&r.jsx("p",{className:"text-red-500 text-sm mt-2",children:Z})]}),r.jsx("div",{className:"p-4",children:_||!l?r.jsx("div",{className:"text-center py-16",children:r.jsx(m.Z,{})}):0===M.length?r.jsx("div",{className:"text-center py-16 border-2 border-dashed rounded-lg",children:r.jsx("p",{className:"text-gray-500",children:"ไม่พบเอกสารที่อนุมัติแล้ว"})}):s?r.jsx("div",{className:"space-y-3",children:M.map(e=>(0,r.jsxs)("div",{className:"bg-gray-50 border rounded-lg p-4 space-y-3",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-semibold text-gray-800 truncate",children:e.documentNumber}),r.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mt-1",children:e.title})]}),e.files&&e.files.length>0&&(0,r.jsxs)("button",{onClick:()=>T(e.files[0]),className:"w-full flex items-center justify-center text-sm bg-white border border-gray-300 rounded-md p-2 hover:bg-gray-100 transition-colors",children:[e.files[0].fileName.toLowerCase().endsWith(".pdf")?r.jsx(x,{className:"w-4 h-4 mr-2 text-red-500"}):r.jsx(u,{className:"w-4 h-4 mr-2 text-blue-500"}),r.jsx("span",{className:"truncate",children:e.files[0].fileName})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t text-xs text-gray-500",children:[r.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded font-medium",children:h.NK[e.status]||e.status}),r.jsx("span",{children:g(e.updatedAt)})]})]},e.id))}):r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"เลขที่เอกสาร"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"หัวข้อเรื่อง"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ไฟล์แนบ"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"สถานะ"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"วันที่อนุมัติ"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800",children:e.documentNumber}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:e.title}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.files&&e.files.length>0?(0,r.jsxs)("button",{onClick:()=>T(e.files[0]),className:"flex items-center text-blue-600 hover:text-blue-800 hover:underline",title:e.files[0].fileName,children:[r.jsx(p.Z,{className:"w-4 h-4 mr-2 flex-shrink-0"}),r.jsx("span",{className:"truncate max-w-[250px]",children:e.files[0].fileName})]}):r.jsx("span",{className:"text-gray-400",children:"-"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:r.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded font-medium",children:h.NK[e.status]||e.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g(e.updatedAt)})]},e.id))})]})})})]}),r.jsx(f.Z,{isOpen:!!E,file:E,onClose:()=>G(null)})]})}function j(){return r.jsx(y,{})}function v(){return r.jsx(l.AuthGuard,{children:r.jsx(a.Suspense,{fallback:r.jsx("div",{className:"p-8 text-center",children:"Loading Dashboard..."}),children:r.jsx(j,{})})})}},31539:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var r=s(10326),a=s(77626),l=s.n(a),i=s(17577),n=s(55993),d=s(71312),o=s(94019);function c({isOpen:e,file:t,onClose:s}){let[a,c]=(0,i.useState)(!1),[x,u]=(0,i.useState)(!1),[p]=(0,i.useState)("mozilla");if(!e||!t)return null;let m=a?"w-full h-full max-w-full max-h-full rounded-none":x?"w-full h-full max-w-full max-h-full rounded-none":"w-full max-w-6xl h-[95vh] rounded-lg";return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 z-[60] flex items-center justify-center",children:(0,r.jsxs)("div",{className:`bg-white shadow-xl flex flex-col transition-all duration-300 ${m}`,children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 border-b bg-gray-50 flex-shrink-0",children:[r.jsx("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:r.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-800 truncate",title:t.fileName,children:t.fileName})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[!x&&r.jsx("button",{onClick:()=>c(!a),className:"text-gray-500 hover:text-gray-800 p-2 rounded-md hover:bg-gray-200 transition-colors",title:a?"ออกจากโหมดเต็มจอ":"โหมดเต็มจอ",children:a?r.jsx(n.Z,{size:16}):r.jsx(d.Z,{size:16})}),r.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-800 p-2 rounded-md hover:bg-gray-200 transition-colors",title:"ปิด",children:r.jsx(o.Z,{size:16})})]})]}),(0,r.jsxs)("div",{className:"jsx-c9fb4320352222b7 flex-1 relative overflow-hidden bg-gray-100",children:[r.jsx("iframe",{src:(()=>{let e=encodeURIComponent(t.fileUrl);return`https://mozilla.github.io/pdf.js/web/viewer.html?file=${e}#toolbar=1&navpanes=0&scrollbar=1`})(),title:`PDF Viewer - ${t.fileName}`,allow:"fullscreen",loading:"lazy",style:{backgroundColor:"#ffffff",filter:"none"},className:"jsx-c9fb4320352222b7 w-full h-full border-0"}),r.jsx(l(),{id:"c9fb4320352222b7",children:"iframe.jsx-c9fb4320352222b7{}"})]}),x&&r.jsx("div",{className:"p-2 bg-gray-50 border-t text-center text-xs text-gray-600",children:"\uD83D\uDCA1 ใช้นิ้วสองนิ้วเพื่อซูม หรือแตะสองครั้งเพื่อซูมอัตโนมัติ"})]})})}},22834:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`D:\ttsdoc-v2\src\app\dashboard\layout.tsx#default`)},38256:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`D:\ttsdoc-v2\src\app\dashboard\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8948,4490,6621,4222,7602,9860,8882],()=>s(32776));module.exports=r})();