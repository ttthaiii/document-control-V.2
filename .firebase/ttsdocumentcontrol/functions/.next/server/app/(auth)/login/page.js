(()=>{var e={};e.id=665,e.ids=[665],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},53227:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>d,pages:()=>c,routeModule:()=>p,tree:()=>l}),r(51554),r(35866),r(94040);var s=r(23191),a=r(88716),o=r(37922),n=r.n(o),i=r(95231),u={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(u[e]=()=>i[e]);r.d(t,u);let l=["",{children:["(auth)",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,51554)),"D:\\ttsdoc-v2\\src\\app\\(auth)\\login\\page.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94040)),"D:\\ttsdoc-v2\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\ttsdoc-v2\\src\\app\\(auth)\\login\\page.tsx"],d="/(auth)/login/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(auth)/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},31635:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},5072:(e,t,r)=>{Promise.resolve().then(r.bind(r,62665))},26506:(e,t,r)=>{Promise.resolve().then(r.bind(r,73791))},35047:(e,t,r)=>{"use strict";var s=r(77389);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},62665:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>l,a:()=>c});var s=r(17577),a=r.n(s),o=r(5779),n=r(76),i=r(67967);let u=(0,s.createContext)({user:null,firebaseUser:null,loading:!0,error:null,refetch:async()=>{},logout:async()=>{}});function l({children:e}){let[t,r]=(0,s.useState)(null),[l,c]=(0,s.useState)(null),[d,m]=(0,s.useState)(!0),[p,x]=(0,s.useState)(null),h=async e=>{try{x(null);let t=await (0,n.QT)((0,n.JU)(i.db,"users",e.uid));if(t.exists()){let r=t.data();c({id:e.uid,email:e.email||"",role:r.role,sites:r.sites||[],status:r.status||"ACTIVE",createdFromInvitation:r.createdFromInvitation,createdAt:r.createdAt?.toDate(),acceptedAt:r.acceptedAt?.toDate()})}else x("ไม่พบข้อมูลผู้ใช้ในระบบ"),c(null)}catch(e){console.error("Error fetching user data:",e),x("เกิดข้อผิดพลาดในการโหลดข้อมูลผู้ใช้"),c(null)}},b=async()=>{t&&await h(t)},g=async()=>{try{await (0,o.w7)(i.I),c(null),r(null),x(null)}catch(e){throw console.error("Logout error:",e),e}};return a().createElement(u.Provider,{value:{user:l,firebaseUser:t,loading:d,error:p,refetch:b,logout:g}},e)}function c(){return(0,s.useContext)(u)}},73791:(e,t,r)=>{"use strict";r.d(t,{LoginForm:()=>l});var s=r(10326),a=r(17577),o=r(35047),n=r(5779),i=r(67967),u=r(74723);function l(){let e=(0,o.useRouter)(),[t,r]=(0,a.useState)(!1),[l,c]=(0,a.useState)(""),{register:d,handleSubmit:m,formState:{errors:p}}=(0,u.cI)(),x=async t=>{r(!0),c("");try{let r=await (0,n.e5)(i.I,t.email,t.password);console.log("Login successful:",r.user),e.push("/dashboard")}catch(e){switch(console.error("Login error:",e),e.code){case"auth/user-not-found":case"auth/wrong-password":c("อีเมลหรือรหัสผ่านไม่ถูกต้อง");break;case"auth/invalid-email":c("รูปแบบอีเมลไม่ถูกต้อง");break;case"auth/too-many-requests":c("มีการพยายามเข้าสู่ระบบมากเกินไป กรุณาลองใหม่ภายหลัง");break;default:c("เกิดข้อผิดพลาดในการเข้าสู่ระบบ")}}finally{r(!1)}};return(0,s.jsxs)("div",{className:"max-w-md mx-auto bg-white p-8 rounded-lg shadow-lg",children:[s.jsx("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-2",children:"\uD83C\uDFD7️ ttsdoc v2"}),s.jsx("p",{className:"text-center text-gray-600 mb-6",children:"เข้าสู่ระบบจัดการเอกสารงานก่อสร้าง"}),(0,s.jsxs)("form",{onSubmit:m(x),className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"อีเมล"}),s.jsx("input",{type:"email",...d("email",{required:"กรุณาใส่อีเมล"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"your.email@company.com"}),p.email&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.email.message})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"รหัสผ่าน"}),s.jsx("input",{type:"password",...d("password",{required:"กรุณาใส่รหัสผ่าน"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"••••••••"}),p.password&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.password.message})]}),l&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:s.jsx("p",{className:"text-red-700 text-sm",children:l})}),s.jsx("button",{type:"submit",disabled:t,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed transition-colors",children:t?"กำลังเข้าสู่ระบบ...":"เข้าสู่ระบบ"})]}),s.jsx("div",{className:"mt-6 text-center",children:(0,s.jsxs)("p",{className:"text-gray-600 text-sm",children:["ต้องการสิทธิ์การเข้าใช้งาน?",s.jsx("br",{}),s.jsx("span",{className:"text-blue-600",children:"ติดต่อผู้ดูแลระบบ"})]})})]})}},67967:(e,t,r)=>{"use strict";r.d(t,{I:()=>i,db:()=>u});var s=r(42585),a=r(5779),o=r(76);let n=(0,s.C6)().length>0?(0,s.C6)()[0]:(0,s.ZF)({apiKey:"AIzaSyAsayb-DEOBE0zi0qh-dPBfihClgXrX1sY",authDomain:"ttsdocumentcontrol.firebaseapp.com",projectId:"ttsdocumentcontrol",storageBucket:"ttsdocumentcontrol.firebasestorage.app",messagingSenderId:"48440915675",appId:"1:48440915675:web:f11611895bfb52d4d27efe"}),i=(0,a.v0)(n),u=(0,o.ad)(n)},51554:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(19510);let a=(0,r(68570).createProxy)(String.raw`D:\ttsdoc-v2\src\lib\components\auth\LoginForm.tsx#LoginForm`);function o(){return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 to-gray-100 flex items-center justify-center p-4",children:s.jsx(a,{})})}},94040:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>n});var s=r(19510);r(5023);var a=r(68570);let o=(0,a.createProxy)(String.raw`D:\ttsdoc-v2\src\lib\auth\useAuth.ts#AuthProvider`);(0,a.createProxy)(String.raw`D:\ttsdoc-v2\src\lib\auth\useAuth.ts#useAuth`);let n={title:"ttsdoc v2 - Construction Document Management",description:"Professional construction document management system"};function i({children:e}){return s.jsx("html",{lang:"th",children:s.jsx("body",{children:s.jsx(o,{children:e})})})}},73881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(66621);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,541,621,723],()=>r(53227));module.exports=s})();