"use strict";(()=>{var e={id:467,ids:[467]};e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},90187:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>v,requestAsyncStorage:()=>p,routeModule:()=>u,serverHooks:()=>g,staticGenerationAsyncStorage:()=>l});var a={};r.r(a),r.d(a,{GET:()=>d});var s=r(49303),o=r(88716),n=r(60670),i=r(87070),c=r(40416);async function d(){try{console.log("\ud83d\udd0d Starting data dump...");const e=await c.iW.collection("sites").get(),t=[];for(const o of e.docs){const e=o.data();console.log(`Processing site: ${o.id} (${e.name})`);const r=await c.iW.collection("sites").doc(o.id).collection("categories").get(),a=[];r.forEach((e=>{const t=e.data();console.log(`  Category ${e.id}:`,t),a.push({id:e.id,categoryCode:t.categoryCode,categoryName:t.categoryName,name:t.name,rfaTypes:t.rfaTypes,active:t.active,createdAt:t.createdAt,createdBy:t.createdBy,description:t.description,sequence:t.sequence})})),t.push({siteId:o.id,siteName:e.name||"Unknown Site",categories:a})}const r=(await c.iW.collection("users").get()).docs.map((e=>({id:e.id,...e.data()}))),a=(await c.iW.collection("counters").get()).docs.map((e=>({id:e.id,...e.data()}))),s=(await c.iW.collection("rfaDocuments").get()).docs.map((e=>({id:e.id,...e.data()})));return i.NextResponse.json({success:!0,data:{sites:t,users:r,counters:a,rfaDocuments:s,summary:{totalSites:t.length,totalUsers:r.length,totalCounters:a.length,totalRfaDocuments:s.length,categoriesPerSite:t.map((e=>({siteName:e.siteName,categoryCount:e.categories.length})))}}})}catch(e){return console.error("Dump Error:",e),i.NextResponse.json({success:!1,error:e.message},{status:500})}}const u=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/debug/dump/route",pathname:"/api/debug/dump",filename:"route",bundlePath:"app/api/debug/dump/route"},resolvedPagePath:"D:\\ttsdoc-v2\\src\\app\\api\\debug\\dump\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:p,staticGenerationAsyncStorage:l,serverHooks:g}=u,m="/api/debug/dump/route";function v(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:l})}},40416:(e,t,r)=>{r.d(t,{CZ:()=>i,Hf:()=>c,iW:()=>n,SI:()=>d,uE:()=>u,Dh:()=>l,aj:()=>g,_B:()=>p,Lv:()=>m});const a=require("firebase-admin"),s=(e,t)=>a.apps.find((t=>t?.name===e))||a.initializeApp(t,e),o=()=>{const e={credential:a.credential.cert({projectId:process.env.TTSDOC_PROJECT_ID,clientEmail:process.env.TTSDOC_CLIENT_EMAIL,privateKey:process.env.TTSDOC_PRIVATE_KEY?.replace(/\\n/g,"\n")}),storageBucket:"ttsdocumentcontrol.firebasestorage.app"};return s("ttsdoc-v2",e)},n=o().firestore(),i=o().auth(),c=o().storage().bucket(),d=o().messaging(),u=(()=>{const e={credential:a.credential.cert({projectId:process.env.BIM_TRACKING_PROJECT_ID,clientEmail:process.env.BIM_TRACKING_CLIENT_EMAIL,privateKey:process.env.BIM_TRACKING_PRIVATE_KEY?.replace(/\\n/g,"\n")})};return s("bim-tracking",e)})().firestore(),p=()=>n,l=()=>i,g=()=>c,m=()=>u}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=t.X(0,[9276,5972],(()=>{return e=90187,t(t.s=e);var e}));module.exports=r})();