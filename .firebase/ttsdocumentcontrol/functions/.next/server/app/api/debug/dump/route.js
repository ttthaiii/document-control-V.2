"use strict";(()=>{var e={};e.id=467,e.ids=[467],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},90187:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>m,patchFetch:()=>v,requestAsyncStorage:()=>u,routeModule:()=>p,serverHooks:()=>g,staticGenerationAsyncStorage:()=>l});var r={};a.r(r),a.d(r,{GET:()=>d});var o=a(49303),s=a(88716),i=a(60670),n=a(87070),c=a(40416);async function d(){try{console.log("\uD83D\uDD0D Starting data dump...");let e=await c.iW.collection("sites").get(),t=[];for(let a of e.docs){let e=a.data();console.log(`Processing site: ${a.id} (${e.name})`);let r=await c.iW.collection("sites").doc(a.id).collection("categories").get(),o=[];r.forEach(e=>{let t=e.data();console.log(`  Category ${e.id}:`,t),o.push({id:e.id,categoryCode:t.categoryCode,categoryName:t.categoryName,name:t.name,rfaTypes:t.rfaTypes,active:t.active,createdAt:t.createdAt,createdBy:t.createdBy,description:t.description,sequence:t.sequence})}),t.push({siteId:a.id,siteName:e.name||"Unknown Site",categories:o})}let a=(await c.iW.collection("users").get()).docs.map(e=>({id:e.id,...e.data()})),r=(await c.iW.collection("counters").get()).docs.map(e=>({id:e.id,...e.data()})),o=(await c.iW.collection("rfaDocuments").get()).docs.map(e=>({id:e.id,...e.data()}));return n.NextResponse.json({success:!0,data:{sites:t,users:a,counters:r,rfaDocuments:o,summary:{totalSites:t.length,totalUsers:a.length,totalCounters:r.length,totalRfaDocuments:o.length,categoriesPerSite:t.map(e=>({siteName:e.siteName,categoryCount:e.categories.length}))}}})}catch(e){return console.error("Dump Error:",e),n.NextResponse.json({success:!1,error:e.message},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/debug/dump/route",pathname:"/api/debug/dump",filename:"route",bundlePath:"app/api/debug/dump/route"},resolvedPagePath:"D:\\ttsdoc-v2\\src\\app\\api\\debug\\dump\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:u,staticGenerationAsyncStorage:l,serverHooks:g}=p,m="/api/debug/dump/route";function v(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:l})}},40416:(e,t,a)=>{a.d(t,{CZ:()=>n,Hf:()=>c,iW:()=>i,uE:()=>d,Lv:()=>p});let r=require("firebase-admin"),o=(e,t)=>r.apps.find(t=>t?.name===e)||r.initializeApp(t,e),s=()=>o("ttsdoc-v2",{credential:r.credential.cert({projectId:process.env.TTSDOC_PROJECT_ID,clientEmail:process.env.TTSDOC_CLIENT_EMAIL,privateKey:process.env.TTSDOC_PRIVATE_KEY?.replace(/\\n/g,"\n")}),storageBucket:"ttsdocumentcontrol.firebasestorage.app"}),i=s().firestore(),n=s().auth(),c=s().storage().bucket(),d=o("bim-tracking",{credential:r.credential.cert({projectId:process.env.BIM_TRACKING_PROJECT_ID,clientEmail:process.env.BIM_TRACKING_CLIENT_EMAIL,privateKey:process.env.BIM_TRACKING_PRIVATE_KEY?.replace(/\\n/g,"\n")})}).firestore(),p=()=>d}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948,5972],()=>a(90187));module.exports=r})();