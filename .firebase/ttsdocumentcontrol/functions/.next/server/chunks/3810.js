"use strict";exports.id=3810,exports.ids=[3810],exports.modules={32933:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},77506:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},56418:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]])},63685:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},13810:(e,t,s)=>{s.d(t,{Z:()=>v});var a=s(10326),r=s(17577),l=s(94019);let i=(0,s(62881).Z)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var d=s(77506),o=s(32933),c=s(56418),n=s(63685),m=s(36283),x=s(50949),u=s(26107);let g=()=>{let[e,t]=(0,r.useState)(!1),[s,a]=(0,r.useState)(null),{firebaseUser:l}=(0,u.a)(),i=(0,r.useCallback)(async(e,t)=>{if(!l)throw Error("User not authenticated");let s=await l.getIdToken(),a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(t)}),r=await a.json();if(!r.success)throw Error(r.error||"Request failed");return r.data},[l]);return{loading:e,error:s,getProjects:(0,r.useCallback)(async e=>{t(!0),a(null);try{return(await i("/api/google-sheets/projects",e)).projects}catch(e){throw a(e.message),e}finally{t(!1)}},[i]),getCategories:(0,r.useCallback)(async(e,s,r)=>{t(!0),a(null);try{return(await i("/api/google-sheets/categories",{...e,projectName:s,rfaType:r})).categories}catch(e){throw a(e.message),e}finally{t(!1)}},[i]),getTasks:(0,r.useCallback)(async(e,s,r)=>{t(!0),a(null);try{return(await i("/api/google-sheets/tasks",{...e,projectName:s,category:r})).tasks}catch(e){throw a(e.message),e}finally{t(!1)}},[i]),clearError:()=>a(null)}};var h=s(79821),p=s(7619),b=s(31469),y=s(67967),f=s(76);let j={rfaType:"",categoryId:"",documentNumber:"",title:"",description:"",revisionNumber:"00",uploadedFiles:[],selectedProject:"",selectedCategory:"",selectedTask:null},N={"RFA-SHOP":{title:"RFA-SHOP",subtitle:"Shop Drawing Approval",icon:"\uD83C\uDFD7️",description:"สำหรับการขออนุมัติ Shop Drawing",workflow:"ผู้สร้าง → Site Admin → CM",allowedRoles:[p.K$.BIM,p.K$.ME,p.K$.SN,p.K$.SITE_ADMIN,p.K$.ADMIN],color:"blue"},"RFA-GEN":{title:"RFA-GEN",subtitle:"General Submission",icon:"\uD83D\uDCCB",description:"สำหรับการส่งเอกสารทั่วไป",workflow:"ผู้สร้าง → CM",allowedRoles:[p.K$.BIM,p.K$.SITE_ADMIN,p.K$.ADMIN,p.K$.ME,p.K$.SN],color:"green"},"RFA-MAT":{title:"RFA-MAT",subtitle:"Material Approval",icon:"\uD83E\uDDF1",description:"สำหรับการขออนุมัติวัสดุ",workflow:"Site Admin → CM",allowedRoles:[p.K$.SITE_ADMIN,p.K$.ADMIN],color:"orange"}};function v({onClose:e,isModal:t=!1,userProp:s,presetRfaType:v}){let[w,k]=(0,r.useState)({...j,rfaType:v||""}),[T,C]=(0,r.useState)(!1),[I,F]=(0,r.useState)(!1),[S,A]=(0,r.useState)({}),[M,$]=(0,r.useState)(!1),[D,Z]=(0,r.useState)([]),[E,R]=(0,r.useState)([]),[K,P]=(0,r.useState)([]),[O,B]=(0,r.useState)(""),[z,G]=(0,r.useState)(!1),[H,J]=(0,r.useState)(null),[L,_]=(0,r.useState)(""),{firebaseUser:q,user:U}=(0,u.a)(),{showNotification:X}=(0,b.l)(),{loading:Q,error:V,getCategories:W,getTasks:Y}=g(),[ee,et]=(0,r.useState)(""),[es,ea]=(0,r.useState)([]),er=(0,r.useMemo)(()=>!s||"RFA-MAT"===w.rfaType||"RFA-GEN"===w.rfaType||"RFA-SHOP"!==w.rfaType||s.role!==p.K$.BIM,[s,w.rfaType]),el=e=>{k(t=>({...t,...e}));let t={...S};Object.keys(e).forEach(e=>delete t[e]),A(t)},ei=()=>{let e={};if(!v){if(w.rfaType){let t=N[w.rfaType];s&&!t.allowedRoles.includes(s.role)&&(e.rfaType=`คุณไม่มีสิทธิ์สร้าง ${w.rfaType}`)}else e.rfaType="กรุณาเลือกประเภท RFA"}return w.title.trim()||(e.title="กรุณาใส่หัวข้อเอกสาร"),w.revisionNumber.trim()||(e.revisionNumber="กรุณาใส่ Rev. No."),O||(e.site="กรุณาเลือกโครงการ"),w.documentNumber.trim()?!1===H&&(e.documentNumber="เลขที่เอกสารนี้ถูกใช้ไปแล้ว"):e.documentNumber="กรุณาใส่เลขที่เอกสาร",er?w.categoryId.trim()||(e.categoryId="กรุณากรอกหมวดงาน"):w.selectedTask||(e.task="กรุณาเลือกงานจาก BIM Tracking"),0===w.uploadedFiles.filter(e=>"success"===e.status).length&&(e.files="กรุณาอัปโหลดไฟล์อย่างน้อย 1 ไฟล์"),A(e),0===Object.keys(e).length},ed=async()=>{if(!ei()){X("warning","ข้อมูลไม่ครบถ้วน","กรุณากรอกข้อมูลในช่องที่มีเครื่องหมาย * ให้ครบ");return}$(!0);try{if(!q)throw Error("กรุณาล็อกอินก่อน");let t=await q.getIdToken(),s=w.uploadedFiles.filter(e=>"success"===e.status&&e.uploadedData),a=er?w.categoryId:w.selectedTask?.taskCategory,r=er?null:w.selectedTask;if(!a)throw Error("ไม่สามารถระบุ Category ID ได้");let l={rfaType:w.rfaType,title:w.title,description:w.description,siteId:O,documentNumber:w.documentNumber,revisionNumber:parseInt(w.revisionNumber,10)||0,uploadedFiles:s.map(e=>e.uploadedData),categoryId:a,taskData:r},i=await fetch("/api/rfa/create",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({payload:l})}),d=await i.json();if(!i.ok)throw Error(d.error||"เกิดข้อผิดพลาดในการสร้างเอกสาร");if(d.success)X("success","สร้าง RFA สำเร็จ!",`หมายเลขเอกสาร: ${d.runningNumber}`),e&&e();else throw Error(d.error)}catch(e){X("error","เกิดข้อผิดพลาด",e instanceof Error?e.message:"An unknown error occurred.")}finally{$(!1)}},eo=async e=>{try{if(!q)throw Error("กรุณาล็อกอินก่อนอัปโหลดไฟล์");let t=await q.getIdToken(),s=new FormData;s.append("file",e);let a=await fetch("/api/rfa/upload-temp-file",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:s}),r=await a.json();if(r.success)return{status:"success",progress:100,uploadedData:r.fileData};throw Error(r.error||"อัปโหลดล้มเหลว")}catch(e){return{status:"error",error:e instanceof Error?e.message:"เกิดข้อผิดพลาด"}}},ec=async e=>{let t=Array.from(e.target.files||[]);if(!t.length)return;let s=t.map(e=>({id:`${e.name}-${Date.now()}`,file:e,status:"pending",progress:0,retryCount:0}));for(let e of(k(e=>({...e,uploadedFiles:[...e.uploadedFiles,...s]})),s)){k(t=>({...t,uploadedFiles:t.uploadedFiles.map(t=>t.id===e.id?{...t,status:"uploading"}:t)}));let t=await eo(e.file);k(s=>({...s,uploadedFiles:s.uploadedFiles.map(s=>s.id===e.id?{...s,...t}:s)}))}e.target.value=""},en=e=>{let t=w.uploadedFiles[e];t.uploadedData?.filePath,el({uploadedFiles:w.uploadedFiles.filter((t,s)=>s!==e)})},em=async e=>{if(B(e),el({categoryId:"",selectedCategory:"",selectedTask:null}),ea([]),R([]),P([]),et(""),!e)return;let t=D.find(t=>t.id===e);if(t){if(F(!0),er)try{let t=(0,f.IO)((0,f.hJ)(y.db,`sites/${e}/categories`),(0,f.Xo)("categoryCode")),s=(await (0,f.PL)(t)).docs.map(e=>({id:e.id,categoryCode:e.data().categoryCode,categoryName:e.data().categoryName}));ea(s)}catch(e){console.error("Failed to fetch site categories:",e),A(e=>({...e,site:"ไม่สามารถโหลดหมวดงานได้"}))}finally{F(!1)}else{el({selectedProject:t.name});try{let e=await W({sheetId:t.sheetId||""},t.name,w.rfaType);R(e)}catch(e){console.error("Failed to fetch categories from BIM-Tracking:",e),A(e=>({...e,site:"ไม่สามารถโหลดหมวดงานจาก BIM-Tracking ได้"}))}finally{F(!1)}}}},ex=async e=>{el({selectedCategory:e,selectedTask:null}),P([]);let t=D.find(e=>e.id===O);if(t&&w.selectedProject)try{let s=await Y({sheetId:t.sheetId||""},w.selectedProject,e);P(s)}catch(e){console.error(e)}},eu=e=>{el({selectedTask:e,title:`${e.taskName} - RFA`}),et(e.taskName)},eg=(0,r.useMemo)(()=>ee?K.filter(e=>e.taskName.toLowerCase().includes(ee.toLowerCase())):K.slice(0,20),[K,ee]);return(0,a.jsxs)("div",{className:`${t?"max-w-4xl w-full mx-auto":""} bg-white rounded-lg shadow-xl flex flex-col h-full max-h-[95vh]`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b bg-gray-50 rounded-t-lg",children:[a.jsx("div",{children:(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["สร้าง RFA Document",w.rfaType&&N[w.rfaType]&&(0,a.jsxs)("span",{className:"font-medium text-gray-600",children:[" - ",N[w.rfaType].subtitle]})]})}),e&&a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:a.jsx(l.Z,{})})]}),(0,a.jsxs)("div",{className:"flex-1 p-4 sm:p-6 overflow-y-auto bg-slate-50 space-y-6",children:[!v&&(0,a.jsxs)("section",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,a.jsxs)("h3",{className:"flex items-center text-lg font-semibold text-gray-900 border-b pb-4 mb-6",children:[a.jsx("span",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center mr-3 font-bold text-base",children:"1"}),"เลือกประเภทเอกสาร"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(N).map(([e,t])=>{let r=!!s&&t.allowedRoles.includes(s.role);return(0,a.jsxs)("div",{onClick:()=>r&&el({rfaType:e}),className:`p-6 border-2 rounded-lg text-center cursor-pointer transition-all duration-200 ${w.rfaType===e?"border-blue-500 bg-blue-50 ring-2 ring-blue-200":r?"border-gray-200 hover:border-gray-400":"border-gray-100 bg-gray-50 opacity-60 cursor-not-allowed"}`,children:[a.jsx("div",{className:"text-4xl mb-3",children:t.icon}),a.jsx("h4",{className:"font-semibold text-gray-800",children:t.title}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.description})]},e)})}),S.rfaType&&a.jsx("p",{className:"text-red-600 text-sm mt-2",children:S.rfaType})]}),(0,a.jsxs)("section",{className:`bg-white p-6 rounded-lg border border-gray-200 ${w.rfaType||v?"":"opacity-40 pointer-events-none"}`,children:[(0,a.jsxs)("h3",{className:"flex items-center text-lg font-semibold text-gray-900 border-b pb-4 mb-6",children:[a.jsx(i,{size:20,className:"mr-3 text-blue-600"}),"ข้อมูลเอกสาร"]}),(0,a.jsxs)("div",{className:"space-y-6 max-w-3xl",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["โครงการ ",a.jsx("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{value:O,onChange:e=>em(e.target.value),className:"w-full p-3 border rounded-lg bg-gray-50",children:[a.jsx("option",{value:"",children:"-- เลือกโครงการ --"}),D.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]}),S.site&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:S.site})]}),er?(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"category-manual-input",className:"block text-sm font-medium text-gray-700 mb-2",children:["หมวดงาน ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{id:"category-manual-input",type:"text",list:"category-list",value:w.categoryId,onChange:e=>el({categoryId:e.target.value}),placeholder:"พิมพ์หรือเลือกหมวดงาน",className:"w-full p-3 border rounded-lg",disabled:!O}),a.jsx("datalist",{id:"category-list",children:es.map(e=>a.jsx("option",{value:e.categoryCode},e.id))}),S.categoryId&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:S.categoryId})]}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:["หมวดงาน ",Q&&a.jsx(h.Z,{className:"w-4 h-4 ml-2"})," ",a.jsx("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{value:w.selectedCategory,onChange:e=>ex(e.target.value),className:"w-full p-3 border rounded-lg disabled:bg-gray-100 bg-gray-50",disabled:!O||Q,children:[a.jsx("option",{value:"",children:Q?"กำลังโหลด...":"-- เลือกหมวดงาน --"}),E.map(e=>a.jsx("option",{value:e,children:e},e))]}),V&&(0,a.jsxs)("p",{className:"text-red-600 text-sm mt-1",children:["Error: ",V]})]})]}),!er&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["ค้นหางาน ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ค้นหาชื่องานจาก BIM Tracking...",value:ee,onChange:e=>et(e.target.value),className:"w-full p-3 border rounded-lg",disabled:!w.selectedCategory||Q}),a.jsx("div",{className:"mt-2 max-h-48 overflow-y-auto border rounded-lg bg-white",children:eg.map(e=>a.jsx("div",{onClick:()=>eu(e),className:`p-3 text-sm cursor-pointer hover:bg-gray-100 ${w.selectedTask?.taskName===e.taskName?"bg-blue-50 font-semibold":""}`,children:e.taskName},e.taskUid||e.taskName))}),S.task&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:S.task})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"เลขที่เอกสาร"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{type:"text",value:w.documentNumber,onChange:e=>{el({documentNumber:e.target.value}),J(null)},className:`w-full p-3 border rounded-lg pr-10 ${!1===H?"border-red-500":""}`}),(0,a.jsxs)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:[z&&a.jsx(d.Z,{className:"h-5 w-5 text-gray-400 animate-spin"}),!z&&!0===H&&a.jsx(o.Z,{className:"h-5 w-5 text-green-500"}),!z&&!1===H&&a.jsx(l.Z,{className:"h-5 w-5 text-red-500"})]})]}),S.documentNumber&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:S.documentNumber}),!z&&!1===H&&!S.documentNumber&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:"เลขที่เอกสารนี้ถูกใช้ไปแล้ว"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rev. No."}),a.jsx("input",{type:"text",value:w.revisionNumber,onChange:e=>el({revisionNumber:e.target.value}),className:"w-full p-3 border rounded-lg"}),S.revisionNumber&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:S.revisionNumber})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["หัวข้อเอกสาร ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:w.title,onChange:e=>el({title:e.target.value}),className:"w-full p-3 border rounded-lg"}),S.title&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:S.title})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"รายละเอียด"}),a.jsx("textarea",{value:w.description,onChange:e=>el({description:e.target.value}),rows:3,className:"w-full p-3 border rounded-lg"})]})]})]}),(0,a.jsxs)("section",{className:`bg-white p-6 rounded-lg border border-gray-200 ${w.rfaType||v?"":"opacity-40 pointer-events-none"}`,children:[(0,a.jsxs)("h3",{className:"flex items-center text-lg font-semibold text-gray-900 border-b pb-4 mb-6",children:[a.jsx(c.Z,{size:20,className:"mr-3 text-blue-600"}),"แนบไฟล์ ",a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,a.jsxs)("div",{className:"space-y-6 max-w-3xl",children:[(0,a.jsxs)("label",{htmlFor:"file-upload",className:"flex flex-col items-center justify-center w-full h-48 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-slate-50 hover:bg-slate-100 transition-colors",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6 text-center",children:[a.jsx(n.Z,{className:"w-10 h-10 mb-4 text-gray-400"}),(0,a.jsxs)("p",{className:"mb-2 text-sm text-gray-500",children:[a.jsx("span",{className:"font-semibold",children:"คลิกเพื่อเลือกไฟล์"})," หรือลากมาวาง"]}),a.jsx("p",{className:"text-xs text-gray-500",children:"สามารถเลือกได้หลายไฟล์พร้อมกัน"})]}),a.jsx("input",{id:"file-upload",type:"file",multiple:!0,onChange:ec,className:"hidden"})]}),w.uploadedFiles.length>0&&a.jsx("div",{children:a.jsx("div",{className:"space-y-2",children:w.uploadedFiles.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center text-sm p-3 bg-gray-100 rounded-lg",children:[a.jsx(m.Z,{className:"w-5 h-5 mr-3 text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"flex-1 truncate",title:e.file.name,children:e.file.name}),(0,a.jsxs)("div",{className:"flex items-center ml-3",children:["uploading"===e.status&&a.jsx(h.Z,{className:"w-4 h-4"}),"success"===e.status&&a.jsx(o.Z,{className:"w-5 h-5 text-green-500"}),"error"===e.status&&a.jsx("span",{title:e.error,children:a.jsx(x.Z,{className:"w-5 h-5 text-red-500"})}),a.jsx("button",{type:"button",onClick:()=>en(t),className:"ml-4 text-gray-500 hover:text-red-600",children:a.jsx(l.Z,{size:18})})]})]},e.id))})}),S.files&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:S.files})]})]}),S.general&&a.jsx("p",{className:"text-red-600 text-sm mt-4 text-center",children:S.general})]}),(0,a.jsxs)("div",{className:"flex justify-end items-center p-6 border-t bg-gray-100 rounded-b-lg",children:[e&&a.jsx("button",{onClick:e,disabled:M,className:"px-6 py-2 rounded-lg bg-white border border-gray-300 text-gray-800 hover:bg-gray-100 disabled:opacity-50 mr-4",children:"ยกเลิก"}),a.jsx("button",{onClick:()=>{ei()?C(!0):alert("กรุณากรอกข้อมูลให้ครบถ้วน")},disabled:M||!w.rfaType&&!v,className:"px-8 py-2 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:M?a.jsx(h.Z,{className:"w-5 h-5"}):"สร้างเอกสาร"})]}),T&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"ยืนยันข้อมูล"}),(0,a.jsxs)("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600",children:[" ",a.jsx(l.Z,{size:24})," "]})]}),(0,a.jsxs)("div",{className:"p-6 overflow-y-auto space-y-4 text-sm",children:[a.jsx("h4",{className:"text-base font-semibold text-gray-700",children:"กรุณาตรวจสอบข้อมูลก่อนสร้างเอกสาร"}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border space-y-2",children:[(0,a.jsxs)("p",{children:[a.jsx("strong",{className:"font-medium text-gray-500 w-28 inline-block",children:"ประเภท:"})," ",w.rfaType]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{className:"font-medium text-gray-500 w-28 inline-block",children:"โครงการ:"})," ",D.find(e=>e.id===O)?.name]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{className:"font-medium text-gray-500 w-28 inline-block",children:"หมวดงาน:"})," ",er?w.categoryId:w.selectedTask?.taskCategory]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{className:"font-medium text-gray-500 w-28 inline-block",children:"เลขที่เอกสาร:"})," ",w.documentNumber||"(ไม่ได้ระบุ)"]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{className:"font-medium text-gray-500 w-28 inline-block",children:"Rev.:"})," ",w.revisionNumber]}),(0,a.jsxs)("p",{className:"border-t pt-2 mt-2",children:[a.jsx("strong",{className:"font-medium text-gray-500 block",children:"หัวข้อ:"})," ",w.title]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-500",children:["ไฟล์แนบ (",w.uploadedFiles.filter(e=>"success"===e.status).length," ไฟล์):"]}),a.jsx("ul",{className:"list-disc list-inside mt-1 space-y-1 text-gray-800",children:w.uploadedFiles.filter(e=>"success"===e.status).map(e=>a.jsx("li",{className:"truncate",children:e.file.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-4 p-4 border-t bg-gray-50",children:[a.jsx("button",{onClick:()=>C(!1),className:"px-6 py-2 rounded-lg bg-gray-200 text-gray-800 hover:bg-gray-300",children:" กลับไปแก้ไข "}),a.jsx("button",{onClick:ed,className:"px-6 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700",children:" ยืนยันและสร้างเอกสาร "})]})]})})]})}}};