(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{7320:function(e,s,r){Promise.resolve().then(r.bind(r,3071))},3071:function(e,s,r){"use strict";r.d(s,{LoginForm:function(){return d}});var t=r(7437),a=r(2265),n=r(9376),o=r(2148),c=r(6855),l=r(9501);function d(){let e=(0,n.useRouter)(),s=(0,n.useSearchParams)(),[r,d]=(0,a.useState)(!1),[i,u]=(0,a.useState)(""),{register:m,handleSubmit:b,formState:{errors:p}}=(0,l.cI)(),x=async r=>{d(!0),u("");try{let t=await (0,o.e5)(c.I8,r.email,r.password);console.log("Login successful:",t.user);let a=s.get("redirect");e.push(a||"/dashboard")}catch(e){switch(console.error("Login error:",e),e.code){case"auth/user-not-found":case"auth/wrong-password":u("อีเมลหรือรหัสผ่านไม่ถูกต้อง");break;case"auth/invalid-email":u("รูปแบบอีเมลไม่ถูกต้อง");break;case"auth/too-many-requests":u("มีการพยายามเข้าสู่ระบบมากเกินไป กรุณาลองใหม่ภายหลัง");break;default:u("เกิดข้อผิดพลาดในการเข้าสู่ระบบ")}}finally{d(!1)}};return(0,t.jsxs)("div",{className:"max-w-md mx-auto bg-white p-8 rounded-lg shadow-lg",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-2",children:"\uD83C\uDFD7️ ttsdoc v2"}),(0,t.jsx)("p",{className:"text-center text-gray-600 mb-6",children:"เข้าสู่ระบบจัดการเอกสารงานก่อสร้าง"}),(0,t.jsxs)("form",{onSubmit:b(x),className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"อีเมล"}),(0,t.jsx)("input",{type:"email",...m("email",{required:"กรุณาใส่อีเมล"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"your.email@company.com"}),p.email&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:p.email.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"รหัสผ่าน"}),(0,t.jsx)("input",{type:"password",...m("password",{required:"กรุณาใส่รหัสผ่าน"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"••••••••"}),p.password&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:p.password.message})]}),i&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,t.jsx)("p",{className:"text-red-700 text-sm",children:i})}),(0,t.jsx)("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed transition-colors",children:r?"กำลังเข้าสู่ระบบ...":"เข้าสู่ระบบ"})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-gray-600 text-sm",children:["ต้องการสิทธิ์การเข้าใช้งาน?",(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"text-blue-600",children:"ติดต่อผู้ดูแลระบบ"})]})})]})}},6855:function(e,s,r){"use strict";r.d(s,{I8:function(){return l},db:function(){return d},vI:function(){return i}});var t=r(738),a=r(2148),n=r(5978),o=r(7012);let c=(0,t.C6)().length>0?(0,t.Mq)():(0,t.ZF)({apiKey:"AIzaSyAsayb-DEOBE0zi0qh-dPBfihClgXrX1sY",authDomain:"ttsdocumentcontrol.firebaseapp.com",projectId:"ttsdocumentcontrol",storageBucket:"ttsdocumentcontrol.firebasestorage.app",messagingSenderId:"48440915675",appId:"1:48440915675:web:f11611895bfb52d4d27efe"}),l=(0,a.v0)(c),d=(0,n.ad)(c),i=async()=>{try{if(await (0,o.Gb)())return(0,o.KL)(c)}catch(e){console.error("Error checking messaging support:",e)}return null}}},function(e){e.O(0,[609,15,134,501,971,997,744],function(){return e(e.s=7320)}),_N_E=e.O()}]);